diff --git a/record.json b/record.json
index e9fe2df..3b69daf 100644
--- a/record.json
+++ b/record.json
@@ -173,6 +173,181 @@
         }
       }
     },
+    "T-20251113-act-007-local-db-schema": {
+      "seed_id": "ACT-007",
+      "title": "设计本地数据库模式与增量更新机制",
+      "type": "coding",
+      "summary": "定义 SQLite 等嵌入式数据库中的课程、Section、会议信息与订阅表结构，设计索引与约束，并实现初始化/迁移与增量更新策略，使数据成为筛选与通知的单一可信源。",
+      "acceptance_draft": [
+        "提供 schema 定义（课程、Section、meeting_times、订阅等表）与必要索引/约束，字段覆盖 FR-01/FR-02/FR-04 所需信息，并附带 ER/说明文档。",
+        "实现 scripts/migrate_db.* 可初始化或升级数据库，重复运行不会破坏已有数据；随机抽样记录验证字段与 SOC 返回一致。",
+        "定义增量更新策略（例如基于 upsert、事务或临时表交换），在模拟部分课程状态变化的场景下，仅更新发生变化的数据且不中断前端/API 查询。"
+      ],
+      "lane": "now",
+      "priority_suggested": "P0",
+      "status": "todo",
+      "dependencies": [
+        "T-20251113-soc-api-validation"
+      ],
+      "blocked": true,
+      "blocked_by": [
+        {
+          "dep_id": "DEP-001",
+          "name": "Rutgers SOC API（courses.json / openSections）",
+          "type": "api",
+          "status": "unknown",
+          "doc_url": "https://github.com/anxious-engineer/Rutgers-Course-API",
+          "note": "接口结构与速率限制需要先通过 T-20251113-soc-api-validation 实测后，才能确定 schema 设计所需字段。"
+        }
+      ],
+      "unblock_plan": "在 T-20251113-soc-api-validation 中确认字段/速率后，设计 schema 与索引并用小样本跑通迁移脚本，再推广到完整数据集。",
+      "estimate_h": 8,
+      "risk": "mid",
+      "confidence": 0.65,
+      "interfaces_touched": [
+        "database",
+        "data-pipeline"
+      ],
+      "artifacts": [
+        "db/schema.sql",
+        "scripts/migrate_db.ts",
+        "docs/db_schema.md"
+      ],
+      "citations": [
+        "EVID-001",
+        "EVID-002",
+        "EVID-006",
+        "R-20251113-frontend-perf"
+      ],
+      "created_at": "2025-11-13T00:00:00Z",
+      "updated_at": "2025-11-13T00:00:00Z",
+      "owner": "tbd",
+      "tags": [
+        "seed:ACT-007",
+        "backend",
+        "database",
+        "data-pipeline"
+      ],
+      "subtasks": {
+        "ST-20251113-act-007-01-entity-design": {
+          "seed_id": null,
+          "title": "本地课程实体模型设计",
+          "type": "docs",
+          "summary": "结合 SOC 字段矩阵与产品需求，设计 courses/sections/meetings/instructors/subscriptions 等实体结构与索引策略。",
+          "acceptance_draft": [
+            "完成包含主键、外键、字段类型、索引的 ER 图/文档，覆盖课程、Section、Meeting、订阅及辅助表。",
+            "列出 SOC 字段到本地字段的映射及转换规则，标注需要推导的字段。",
+            "描述关键索引（term+campus+subject、section index）与存储约束，给出 rationale。"
+          ],
+          "lane": "now",
+          "priority_suggested": "P0",
+          "status": "todo",
+          "dependencies": [
+            "ST-20251113-soc-api-validation-02-field-matrix"
+          ],
+          "blocked": false,
+          "blocked_by": [],
+          "unblock_plan": "同步 SOC 字段矩阵结论，快速迭代文档草稿，邀评后定稿。",
+          "estimate_h": 3,
+          "risk": "medium",
+          "confidence": 0.7,
+          "interfaces_touched": [
+            "database",
+            "docs"
+          ],
+          "artifacts": [
+            "docs/local_data_model.md"
+          ],
+          "citations": [],
+          "created_at": "2025-11-13T00:00:00Z",
+          "updated_at": "2025-11-13T00:00:00Z",
+          "owner": "tbd",
+          "tags": [
+            "database",
+            "docs"
+          ]
+        },
+        "ST-20251113-act-007-02-migration-tooling": {
+          "seed_id": null,
+          "title": "SQLite 迁移与初始化机制",
+          "type": "coding",
+          "summary": "实现可重复执行的建库/迁移脚本，为首次初始化与未来升级提供统一入口。",
+          "acceptance_draft": [
+            "提供 scripts/migrate_db.ts（或等效工具）以版本化 SQL，首次运行能创建 schema，重复执行只应用新迁移。",
+            "脚本支持指定数据库路径、dry-run/verbose 模式，并输出 data/migrations.log。",
+            "在空目录与已有数据库上各跑一次，确认无 destructive 写入且日志清晰。"
+          ],
+          "lane": "now",
+          "priority_suggested": "P0",
+          "status": "todo",
+          "dependencies": [
+            "ST-20251113-act-007-01-entity-design"
+          ],
+          "blocked": false,
+          "blocked_by": [],
+          "unblock_plan": "根据定稿模型编写 schema.sql，再封装 CLI 与版本记录，最后补充 README 片段。",
+          "estimate_h": 3,
+          "risk": "medium",
+          "confidence": 0.68,
+          "interfaces_touched": [
+            "database",
+            "build-script"
+          ],
+          "artifacts": [
+            "scripts/migrate_db.ts",
+            "data/schema.sql"
+          ],
+          "citations": [],
+          "created_at": "2025-11-13T00:00:00Z",
+          "updated_at": "2025-11-13T00:00:00Z",
+          "owner": "tbd",
+          "tags": [
+            "database",
+            "backend"
+          ]
+        },
+        "ST-20251113-act-007-03-incremental-strategy": {
+          "seed_id": null,
+          "title": "增量更新策略验证",
+          "type": "coding",
+          "summary": "设计增量更新方案（diff 检测、重复运行策略），并使用小样本验证可重复/可回滚。",
+          "acceptance_draft": [
+            "明确增量判断逻辑（哈希对比、updated_at 字段等）并写进 docs/data_refresh_strategy.md。",
+            "对 ≥3 个 subject 做一次增量试跑，输出新增/更新/删除统计及执行耗时。",
+            "记录需要强制全量重建的触发条件与 runbook。"
+          ],
+          "lane": "next",
+          "priority_suggested": "P1",
+          "status": "todo",
+          "dependencies": [
+            "ST-20251113-act-007-02-migration-tooling",
+            "ST-20251113-soc-api-validation-03-limit-profile"
+          ],
+          "blocked": false,
+          "blocked_by": [],
+          "unblock_plan": "复用迁移脚本与限流结论，先跑单校区 diff，确认流程后扩展到多校区。",
+          "estimate_h": 2,
+          "risk": "medium",
+          "confidence": 0.62,
+          "interfaces_touched": [
+            "database",
+            "data-pipeline"
+          ],
+          "artifacts": [
+            "docs/data_refresh_strategy.md",
+            "notebooks/incremental_trial.md"
+          ],
+          "citations": [],
+          "created_at": "2025-11-13T00:00:00Z",
+          "updated_at": "2025-11-13T00:00:00Z",
+          "owner": "tbd",
+          "tags": [
+            "database",
+            "data-pipeline"
+          ]
+        }
+      }
+    },
     "T-20251113-act-001-soc-json-scraper": {
       "seed_id": "ACT-001",
       "title": "封装 Rutgers SOC 数据抓取与本地数据库初始化脚本",
@@ -350,551 +525,341 @@
         }
       }
     },
-    "T-20251113-act-002-frontend-filter-mvp": {
-      "seed_id": "ACT-002",
-      "title": "实现基于本地查询 API 的课程列表与多维筛选（MVP）",
+    "T-20251113-act-008-local-query-api": {
+      "seed_id": "ACT-008",
+      "title": "实现本地课程查询 API 服务",
       "type": "coding",
-      "summary": "前端 SPA 不再一次性加载全部课程 JSON，而是通过本地查询 API 按需请求课程/Section 数据，提供与 FR-01/FR-02/FR-03 对齐的多维筛选、周视图及分页体验，确保 UI 与数据库保持一致。",
+      "summary": "基于 SQLite 数据库实现 RESTful API（如 /api/courses、/api/sections、/api/filters），支持多字段过滤、分页与排序，为前端筛选与订阅面板提供一致的数据访问层。",
       "acceptance_draft": [
-        "用户选择 term + campus 后，前端调用本地 API 拉取分页课程/Section 数据并展示完整字段，随机抽样 ≥10 门课核对与 SOC 数据库存储一致。",
-        "筛选 UI 支持标题/代码关键字、学分、院系、课程层次、先修、核心代码、Index/Section、教师、状态、星期/时间区间、校区/教学楼/教室、授课模式等字段的单条件与多条件组合，前端会将条件映射为 API 查询参数并保证结果一致。",
-        "在约 4500 门课程（含 1 万+ Section）的数据量下，常见筛选、分页与视图切换的“API 往返 + 前端渲染”整体响应 < 0.5 秒；当本地 API 不可用时给出明确的错误提示。"
+        "实现至少 /api/courses 与 /api/sections 两个端点，接受 term/campus/subject/关键字/时间/core_code/level 等查询参数，返回 JSON 包含分页信息，任意组合筛选均能得到与数据库一致的结果。",
+        "在 4500+ 课程数据规模下，常见查询（含 3~5 个过滤条件）响应时间 < 300 ms，提供必要索引与缓存并通过压测记录指标。",
+        "API 提供错误处理与健康检查端点（例如 /api/health），当前端无法连接时能返回明确错误码与原因，便于 UI 友好提示。"
       ],
       "lane": "now",
       "priority_suggested": "P0",
       "status": "todo",
       "dependencies": [
-        "T-20251113-act-001-soc-json-scraper",
-        "T-20251113-act-008-local-query-api"
+        "T-20251113-act-007-local-db-schema",
+        "T-20251113-act-001-soc-json-scraper"
       ],
       "blocked": false,
       "blocked_by": [],
-      "unblock_plan": "",
+      "unblock_plan": "复用抓取脚本产出的 SQLite 数据，挑选轻量框架（Express/Fastify/FastAPI 等）实现端点，并通过自动化测试覆盖主要组合筛选。",
       "estimate_h": 8,
       "risk": "mid",
       "confidence": 0.7,
       "interfaces_touched": [
-        "frontend",
-        "api-client",
-        "filter-logic",
-        "calendar-view"
+        "backend",
+        "api",
+        "database"
       ],
       "artifacts": [
-        "src/pages/courses.tsx",
-        "src/components/filters/*",
-        "src/components/calendar-view/*",
-        "src/api/hooks/useCourses.ts"
+        "services/api/server.ts",
+        "services/api/routes/courses.ts",
+        "tests/api/courses.test.ts"
       ],
       "citations": [
         "EVID-001",
-        "EVID-002",
         "EVID-006",
-        "R-20251113-frontend-perf",
-        "D-20251113-arch-static-frontend-b"
+        "R-20251113-frontend-perf"
       ],
       "created_at": "2025-11-13T00:00:00Z",
       "updated_at": "2025-11-13T00:00:00Z",
       "owner": "tbd",
       "tags": [
-        "seed:ACT-002",
-        "frontend",
-        "filter",
-        "mvp"
+        "seed:ACT-008",
+        "backend",
+        "api",
+        "database"
       ],
       "subtasks": {
-        "ST-20251113-act-002-01-ui-architecture": {
+        "ST-20251113-act-008-01-contract": {
           "seed_id": null,
-          "title": "课程列表信息架构与状态规划",
-          "type": "docs",
-          "summary": "规划课程浏览/筛选页面布局、状态管理形态与导航路径，确定 UI 模块切分。",
+          "title": "课程查询接口契约与服务骨架",
+          "type": "coding",
+          "summary": "定义课程查询 API 的输入/输出契约，搭建基础服务骨架并做好请求校验。",
           "acceptance_draft": [
-            "在 docs/ui_flow_course_list.md 中绘制页面结构、状态流与交互草图。",
-            "定义全局过滤状态 shape（term、campus、tags、schedule）以及 URL 同步策略。",
-            "列出核心组件清单与依赖关系，拆出后续实现任务。"
+            "在 docs/query_api_contract.md 中描述支持的过滤项、排序、分页与返回字段结构。",
+            "创建服务骨架（例如 Fastify/Express），包含 routing、DI、配置加载。",
+            "添加请求体验证与基础日志中间件，便于后续扩展。"
           ],
           "lane": "next",
           "priority_suggested": "P1",
           "status": "todo",
           "dependencies": [
-            "ST-20251113-act-008-01-contract"
+            "ST-20251113-act-001-03-data-verification"
           ],
           "blocked": false,
           "blocked_by": [],
-          "unblock_plan": "基于 API 契约配置页面信息架构草图，先跑线框评审再输出文档。",
-          "estimate_h": 2,
+          "unblock_plan": "基于数据 runbook 的字段定义编写契约，再 scaffolding 服务。",
+          "estimate_h": 3,
           "risk": "medium",
-          "confidence": 0.72,
+          "confidence": 0.7,
           "interfaces_touched": [
-            "frontend",
-            "calendar-view"
+            "api",
+            "database"
           ],
           "artifacts": [
-            "docs/ui_flow_course_list.md",
-            "frontend/src/state/courseFilters.ts"
+            "docs/query_api_contract.md",
+            "api/src/server.ts"
           ],
           "citations": [],
           "created_at": "2025-11-13T00:00:00Z",
           "updated_at": "2025-11-13T00:00:00Z",
           "owner": "tbd",
           "tags": [
-            "frontend",
-            "ux"
+            "api",
+            "backend"
           ]
         },
-        "ST-20251113-act-002-02-filter-components": {
-          "seed_id": null,
-          "title": "筛选组件与日历视图 MVP",
-          "type": "coding",
-          "summary": "基于信息架构实现过滤面板、标签/芯片组件与日历/时间视图，使用 mock 数据验证交互。",
-          "acceptance_draft": [
-            "构建 FilterPanel、TagChip、SchedulePreview 等组件，支持多选/清空状态。",
-            "实现周视图/时间表可视化，展示 mock 课程安排并保持响应式布局。",
-            "提供 Storybook/开发页以 mock 数据驱动组件，覆盖主要状态。"
-          ],
-          "lane": "next",
-          "priority_suggested": "P1",
-          "status": "todo",
-          "dependencies": [
-            "ST-20251113-act-002-01-ui-architecture"
-          ],
-          "blocked": false,
-          "blocked_by": [],
-          "unblock_plan": "先以静态数据实现组件，确认 UX 后再准备 API 接入。",
-          "estimate_h": 3,
-          "risk": "medium",
-          "confidence": 0.66,
-          "interfaces_touched": [
-            "frontend",
-            "calendar-view"
-          ],
-          "artifacts": [
-            "frontend/src/components/FilterPanel.tsx",
-            "frontend/src/components/SchedulePreview.tsx"
-          ],
-          "citations": [],
-          "created_at": "2025-11-13T00:00:00Z",
-          "updated_at": "2025-11-13T00:00:00Z",
-          "owner": "tbd",
-          "tags": [
-            "frontend",
-            "ux"
-          ]
-        },
-        "ST-20251113-act-002-03-api-integration": {
+        "ST-20251113-act-008-02-filter-engine": {
           "seed_id": null,
-          "title": "接入查询接口并优化交互",
+          "title": "本地查询与筛选实现",
           "type": "coding",
-          "summary": "将前端筛选 UI 与真实课程查询 API 打通，处理加载/错误与性能问题。",
+          "summary": "实现依赖 SQLite 的查询层，覆盖多维过滤、分页与高级筛选。",
           "acceptance_draft": [
-            "实现 useCourseQuery Hook，整合分页、缓存与取消请求逻辑，支撑筛选组件。",
-            "为请求错误与空数据提供可视化反馈（Toast/提示语），并支持重试。",
-            "优化列表渲染（虚拟列表/去抖）确保常见筛选组合的交互不卡顿。"
+            "实现查询 builder/DAO，支持 term、campus、subject、核心要求、时间段等组合过滤。",
+            "覆盖高级条件（可空位、授课模式、Instructor 关键字），结果支持分页且稳定排序。",
+            "添加单元/集成测试验证常见过滤组合。"
           ],
           "lane": "next",
           "priority_suggested": "P1",
           "status": "todo",
           "dependencies": [
-            "ST-20251113-act-002-02-filter-components",
-            "ST-20251113-act-008-03-api-hardening"
-          ],
-          "blocked": false,
-          "blocked_by": [],
-          "unblock_plan": "连通 API 后对慢查询场景进行 profiling，必要时回写后端需求。",
-          "estimate_h": 3,
-          "risk": "high",
-          "confidence": 0.6,
-          "interfaces_touched": [
-            "frontend",
-            "api"
-          ],
-          "artifacts": [
-            "frontend/src/hooks/useCourseQuery.ts",
-            "frontend/src/components/CourseList.tsx"
-          ],
-          "citations": [],
-          "created_at": "2025-11-13T00:00:00Z",
-          "updated_at": "2025-11-13T00:00:00Z",
-          "owner": "tbd",
-          "tags": [
-            "frontend",
-            "mvp"
-          ]
-        }
-      }
-    },
-    "T-20251113-act-003-mail-notify-function": {
-      "seed_id": "ACT-003",
-      "title": "实现课程空位邮件通知功能（本地定时任务）",
-      "type": "coding",
-      "summary": "依据 D-20251113-notify-channels-email-discord，在每个部署环境中运行本地后台进程定期轮询 SOC openSections，结合本地数据库中的订阅记录判断 Closed→Open 事件，并通过可配置的邮件发送模块通知用户，满足 FR-04/FR-05/FR-06 与 NFR-02 的延迟与可靠性要求。",
-      "acceptance_draft": [
-        "在本地测试环境模拟 Closed→Open 场景时，记录从状态变化到邮件发送的时间，平均延迟 < 30 秒、最大延迟 < 60 秒，且同一开放事件同一邮箱只收到 1 封邮件。",
-        "邮件正文包含课程名称、Index、Section、上课时间地点与订阅人信息，并提供安全的本地退订/管理链接；退订后同一订阅不再收到后续通知。",
-        "本地通知进程支持自定义轮询频率、日志与错误重试，能够在网络异常/进程重启后恢复状态，不会静默丢失事件。"
-      ],
-      "lane": "now",
-      "priority_suggested": "P0",
-      "status": "todo",
-      "dependencies": [
-        "T-20251113-act-009-subscription-management",
-        "T-20251113-act-010-local-polling-notify",
-        "T-20251113-act-011-mail-sender-module"
-      ],
-      "blocked": true,
-      "blocked_by": [
-        {
-          "dep_id": "DEP-001",
-          "name": "Rutgers SOC API（courses.json / openSections）",
-          "type": "api",
-          "status": "unknown",
-          "doc_url": "https://github.com/anxious-engineer/Rutgers-Course-API",
-          "note": "接口无正式公开文档，速率限制与长期稳定性未知；若访问策略收紧，将影响通知准确性。"
-        },
-        {
-          "dep_id": "DEP-002",
-          "name": "SendGrid 或同类邮件发送服务",
-          "type": "api",
-          "status": "approved",
-          "doc_url": "",
-          "note": "免费额度有限且需要正确配置发件域名与内容策略，以降低被判为垃圾邮件的风险。"
-        }
-      ],
-      "unblock_plan": "基于 T-20251113-act-010-local-polling-notify 提供的轮询结果与 T-20251113-act-011-mail-sender-module 中的发送适配器，设计本地 cron/worker，验证多次重试与恢复逻辑后再开放配置。",
-      "estimate_h": 8,
-      "risk": "high",
-      "confidence": 0.65,
-      "interfaces_touched": [
-        "local-service",
-        "notification-service",
-        "email-provider",
-        "scheduler"
-      ],
-      "artifacts": [
-        "services/notifier/email_worker.ts",
-        "templates/email/*",
-        "config/email.json"
-      ],
-      "citations": [
-        "EVID-001",
-        "EVID-003",
-        "EVID-005",
-        "R-20251113-notify-delay",
-        "R-20251113-spam"
-      ],
-      "created_at": "2025-11-13T00:00:00Z",
-      "updated_at": "2025-11-13T00:00:00Z",
-      "owner": "tbd",
-      "tags": [
-        "seed:ACT-003",
-        "backend",
-        "email",
-        "notification"
-      ],
-      "subtasks": {
-        "ST-20251113-act-003-01-worker-contract": {
-          "seed_id": null,
-          "title": "邮件通知 worker 契约",
-          "type": "docs",
-          "summary": "定义开放事件到邮件 worker 的 payload/队列契约，确定幂等与重试语义。",
-          "acceptance_draft": [
-            "描述 queue payload 字段（event_id、subscription_id、template_id、locale），附 JSON Schema。",
-            "定义 ack/nack、重试/死信策略，以及 MailSender 调用期望。",
-            "记录版本控制策略，确保未来扩展兼容旧 worker。"
-          ],
-          "lane": "next",
-          "priority_suggested": "P0",
-          "status": "todo",
-          "dependencies": [
-            "ST-20251113-act-010-02-polling-worker",
-            "ST-20251113-act-011-01-mail-interface"
-          ],
-          "blocked": false,
-          "blocked_by": [],
-          "unblock_plan": "梳理事件字段与邮件接口需要的信息，写出 schema 与重试语义。",
-          "estimate_h": 2,
-          "risk": "medium",
-          "confidence": 0.7,
-          "interfaces_touched": [
-            "notification-service",
-            "docs"
-          ],
-          "artifacts": [
-            "docs/mail_worker_contract.md"
-          ],
-          "citations": [],
-          "created_at": "2025-11-13T00:00:00Z",
-          "updated_at": "2025-11-13T00:00:00Z",
-          "owner": "tbd",
-          "tags": [
-            "notification",
-            "docs"
-          ]
-        },
-        "ST-20251113-act-003-02-worker-implementation": {
-          "seed_id": null,
-          "title": "邮件 worker 实现",
-          "type": "coding",
-          "summary": "实现消费开放事件、拼装邮件内容并调用 MailSender 的 worker 进程。",
-          "acceptance_draft": [
-            "实现 workers/mail_dispatcher.ts，拉取事件+订阅信息，按模板拼装多语言邮件。",
-            "集成 MailSender 适配层，记录发送成功/失败与重试情况。",
-            "添加集成测试，验证示例事件能发送预期内容。"
-          ],
-          "lane": "next",
-          "priority_suggested": "P0",
-          "status": "todo",
-          "dependencies": [
-            "ST-20251113-act-003-01-worker-contract",
-            "ST-20251113-act-011-02-provider-adapter"
+            "ST-20251113-act-008-01-contract"
           ],
           "blocked": false,
           "blocked_by": [],
-          "unblock_plan": "基于契约实现 worker，优先跑单个事件端到端，再补上线控制。",
+          "unblock_plan": "先实现基础查询，再迭代增加高级过滤与测试用例。",
           "estimate_h": 3,
           "risk": "high",
           "confidence": 0.63,
           "interfaces_touched": [
-            "notification-service",
-            "database"
+            "api",
+            "filter-logic"
           ],
           "artifacts": [
-            "workers/mail_dispatcher.ts",
-            "workers/tests/mail_dispatcher.test.ts"
+            "api/src/queries/course_search.ts",
+            "api/tests/course_search.test.ts"
           ],
           "citations": [],
           "created_at": "2025-11-13T00:00:00Z",
           "updated_at": "2025-11-13T00:00:00Z",
           "owner": "tbd",
           "tags": [
-            "notification",
-            "email"
+            "api",
+            "filter"
           ]
         },
-        "ST-20251113-act-003-03-end-to-end-validation": {
+        "ST-20251113-act-008-03-api-hardening": {
           "seed_id": null,
-          "title": "端到端延迟与幂等验证",
-          "type": "research",
-          "summary": "验证事件→队列→邮件的整体延迟、失败重试与幂等行为，形成监控指标。",
+          "title": "错误处理、健康检查与日志",
+          "type": "coding",
+          "summary": "补齐查询服务的健康探针、错误处理与可观测性，保证前端/worker 能稳定依赖。",
           "acceptance_draft": [
-            "模拟真实事件流，测量从 open event 到邮件送达的延迟并记录统计。",
-            "重复投递同一事件，确认 dedupe key 起效，不会对同一用户轰炸邮件。",
-            "在 docs/notify_runbook.md 记录 SLO、报警阈值与排障步骤。"
+            "实现 /health 与 /ready 探针，检查数据库连通性与必要表存在。",
+            "统一错误处理返回结构，附 trace id，配置结构化日志输出查询指标。",
+            "记录运维注意事项（端口、环境变量、限流）到 docs/query_api_contract.md 或附录。"
           ],
           "lane": "next",
-          "priority_suggested": "P0",
+          "priority_suggested": "P1",
           "status": "todo",
           "dependencies": [
-            "ST-20251113-act-003-02-worker-implementation",
-            "ST-20251113-act-010-03-resume-tests",
-            "ST-20251113-act-011-03-retry-tuning"
+            "ST-20251113-act-008-02-filter-engine"
           ],
           "blocked": false,
           "blocked_by": [],
-          "unblock_plan": "搭建 staging 事件流，跑多轮压测并收集指标，再整理成文档。",
+          "unblock_plan": "在已有服务基础上加入健康探针与日志，并更新文档提醒使用方式。",
           "estimate_h": 2,
           "risk": "medium",
-          "confidence": 0.61,
+          "confidence": 0.74,
           "interfaces_touched": [
-            "notification-service",
+            "api",
             "observability"
           ],
           "artifacts": [
-            "reports/mail_worker_latency.md",
-            "docs/notify_runbook.md"
+            "api/src/health.ts",
+            "api/src/middleware/logging.ts"
           ],
           "citations": [],
           "created_at": "2025-11-13T00:00:00Z",
           "updated_at": "2025-11-13T00:00:00Z",
           "owner": "tbd",
           "tags": [
-            "notification",
-            "email"
+            "api",
+            "backend"
           ]
         }
       }
     },
-    "T-20251113-act-004-discord-notify-channel": {
-      "seed_id": "ACT-004",
-      "title": "实现 Discord 通知通道并评估私信与频道策略",
+    "T-20251113-act-002-frontend-filter-mvp": {
+      "seed_id": "ACT-002",
+      "title": "实现基于本地查询 API 的课程列表与多维筛选（MVP）",
       "type": "coding",
-      "summary": "在本地通知管道中新增 Discord Bot 通道，运行本地 Bot 客户端将课程开放提醒发送给用户或频道，并结合 Q-04 评估“私信 vs 频道广播”的可行性、噪音与速率限制表现，为默认策略提供依据。",
+      "summary": "前端 SPA 不再一次性加载全部课程 JSON，而是通过本地查询 API 按需请求课程/Section 数据，提供与 FR-01/FR-02/FR-03 对齐的多维筛选、周视图及分页体验，确保 UI 与数据库保持一致。",
       "acceptance_draft": [
-        "在本地或测试服务器中，Bot 能根据数据库内的订阅记录成功向指定用户或频道发送包含课程名、Index 与时间地点的提醒消息。",
-        "实现对 Discord API 速率限制的节流与重试逻辑，本地轮询高频触发时仍保持稳定，不出现长期封禁或严重错误。",
-        "文档中记录不同通知模式（私信/频道）的优缺点与推荐默认值，并与产品负责人达成一致。"
+        "用户选择 term + campus 后，前端调用本地 API 拉取分页课程/Section 数据并展示完整字段，随机抽样 ≥10 门课核对与 SOC 数据库存储一致。",
+        "筛选 UI 支持标题/代码关键字、学分、院系、课程层次、先修、核心代码、Index/Section、教师、状态、星期/时间区间、校区/教学楼/教室、授课模式等字段的单条件与多条件组合，前端会将条件映射为 API 查询参数并保证结果一致。",
+        "在约 4500 门课程（含 1 万+ Section）的数据量下，常见筛选、分页与视图切换的“API 往返 + 前端渲染”整体响应 < 0.5 秒；当本地 API 不可用时给出明确的错误提示。"
       ],
-      "lane": "next",
-      "priority_suggested": "P2",
+      "lane": "now",
+      "priority_suggested": "P0",
       "status": "todo",
       "dependencies": [
-        "T-20251113-act-009-subscription-management",
-        "T-20251113-act-010-local-polling-notify",
-        "T-20251113-act-003-mail-notify-function"
-      ],
-      "blocked": true,
-      "blocked_by": [
-        {
-          "dep_id": "DEP-001",
-          "name": "Rutgers SOC API（courses.json / openSections）",
-          "type": "api",
-          "status": "unknown",
-          "doc_url": "https://github.com/anxious-engineer/Rutgers-Course-API",
-          "note": "接口结构与速率限制的不确定性会影响 Discord 通知的触发准确性。"
-        },
-        {
-          "dep_id": "DEP-003",
-          "name": "Discord Bot API",
-          "type": "api",
-          "status": "approved",
-          "doc_url": "",
-          "note": "受速率限制和内容政策约束，过于频繁或模板化的消息可能被限流或封禁。"
-        }
+        "T-20251113-act-001-soc-json-scraper",
+        "T-20251113-act-008-local-query-api"
       ],
-      "unblock_plan": "在本地环境运行 Bot，复用 T-20251113-act-010-local-polling-notify 的事件推送，结合 Discord Sandbox 逐步提升频率以摸清速率限制，再决定默认通知模式。",
-      "estimate_h": 6,
+      "blocked": false,
+      "blocked_by": [],
+      "unblock_plan": "",
+      "estimate_h": 8,
       "risk": "mid",
-      "confidence": 0.6,
+      "confidence": 0.7,
       "interfaces_touched": [
-        "local-service",
-        "notification-service",
-        "discord-bot"
+        "frontend",
+        "api-client",
+        "filter-logic",
+        "calendar-view"
       ],
       "artifacts": [
-        "services/notifier/discord_bot.ts",
-        "config/discord.json"
+        "src/pages/courses.tsx",
+        "src/components/filters/*",
+        "src/components/calendar-view/*",
+        "src/api/hooks/useCourses.ts"
       ],
       "citations": [
         "EVID-001",
-        "EVID-004",
-        "R-20251113-notify-delay",
-        "R-20251113-spam"
+        "EVID-002",
+        "EVID-006",
+        "R-20251113-frontend-perf",
+        "D-20251113-arch-static-frontend-b"
       ],
       "created_at": "2025-11-13T00:00:00Z",
       "updated_at": "2025-11-13T00:00:00Z",
       "owner": "tbd",
       "tags": [
-        "seed:ACT-004",
-        "backend",
-        "discord",
-        "notification"
+        "seed:ACT-002",
+        "frontend",
+        "filter",
+        "mvp"
       ],
       "subtasks": {
-        "ST-20251113-act-004-01-strategy": {
+        "ST-20251113-act-002-01-ui-architecture": {
           "seed_id": null,
-          "title": "Discord 通知策略与配置",
+          "title": "课程列表信息架构与状态规划",
           "type": "docs",
-          "summary": "确定 Discord 通知形式（私信/频道）、权限配置与默认使用策略，输出 runbook。",
+          "summary": "规划课程浏览/筛选页面布局、状态管理形态与导航路径，确定 UI 模块切分。",
           "acceptance_draft": [
-            "评估 DM vs 频道通知优缺点，确认 MVP 方案与 fallback。",
-            "整理 Bot 权限、Bot Token/频道 ID 配置方式，写 configs/discord_bot.example.json。",
-            "提供消息格式与速率限制建议，记录到 docs/discord_strategy.md。"
+            "在 docs/ui_flow_course_list.md 中绘制页面结构、状态流与交互草图。",
+            "定义全局过滤状态 shape（term、campus、tags、schedule）以及 URL 同步策略。",
+            "列出核心组件清单与依赖关系，拆出后续实现任务。"
           ],
           "lane": "next",
-          "priority_suggested": "P2",
+          "priority_suggested": "P1",
           "status": "todo",
           "dependencies": [
-            "ST-20251113-act-010-01-event-spec"
+            "ST-20251113-act-008-01-contract"
           ],
           "blocked": false,
           "blocked_by": [],
-          "unblock_plan": "调研 Discord API 限制，快速拉出策略对比表并定 MVP 默认。",
+          "unblock_plan": "基于 API 契约配置页面信息架构草图，先跑线框评审再输出文档。",
           "estimate_h": 2,
           "risk": "medium",
-          "confidence": 0.7,
+          "confidence": 0.72,
           "interfaces_touched": [
-            "discord-bot",
-            "docs"
+            "frontend",
+            "calendar-view"
           ],
           "artifacts": [
-            "docs/discord_strategy.md",
-            "configs/discord_bot.example.json"
+            "docs/ui_flow_course_list.md",
+            "frontend/src/state/courseFilters.ts"
           ],
           "citations": [],
           "created_at": "2025-11-13T00:00:00Z",
           "updated_at": "2025-11-13T00:00:00Z",
           "owner": "tbd",
           "tags": [
-            "discord",
-            "notification"
+            "frontend",
+            "ux"
           ]
         },
-        "ST-20251113-act-004-02-bot-sending": {
+        "ST-20251113-act-002-02-filter-components": {
           "seed_id": null,
-          "title": "Discord Bot 发送能力",
+          "title": "筛选组件与日历视图 MVP",
           "type": "coding",
-          "summary": "实现最小可用的 Discord Bot/ webhook 发送模块，支持私信或频道推送并记录日志。",
+          "summary": "基于信息架构实现过滤面板、标签/芯片组件与日历/时间视图，使用 mock 数据验证交互。",
           "acceptance_draft": [
-            "实现 notifications/discord/bot.ts，可向指定频道/用户发送消息并处理异常。",
-            "加入 CLI/脚本可发送测试消息，用于部署验证。",
-            "记录成功/失败日志与速率限制触发情况。"
+            "构建 FilterPanel、TagChip、SchedulePreview 等组件，支持多选/清空状态。",
+            "实现周视图/时间表可视化，展示 mock 课程安排并保持响应式布局。",
+            "提供 Storybook/开发页以 mock 数据驱动组件，覆盖主要状态。"
           ],
           "lane": "next",
-          "priority_suggested": "P2",
+          "priority_suggested": "P1",
           "status": "todo",
           "dependencies": [
-            "ST-20251113-act-004-01-strategy"
+            "ST-20251113-act-002-01-ui-architecture"
           ],
           "blocked": false,
           "blocked_by": [],
-          "unblock_plan": "基于策略选定 SDK，快速实现发送函数并补测试脚本。",
+          "unblock_plan": "先以静态数据实现组件，确认 UX 后再准备 API 接入。",
           "estimate_h": 3,
           "risk": "medium",
-          "confidence": 0.68,
+          "confidence": 0.66,
           "interfaces_touched": [
-            "discord-bot",
-            "notification-service"
+            "frontend",
+            "calendar-view"
           ],
           "artifacts": [
-            "notifications/discord/bot.ts",
-            "notifications/discord/tests/bot.test.ts"
+            "frontend/src/components/FilterPanel.tsx",
+            "frontend/src/components/SchedulePreview.tsx"
           ],
           "citations": [],
           "created_at": "2025-11-13T00:00:00Z",
           "updated_at": "2025-11-13T00:00:00Z",
           "owner": "tbd",
           "tags": [
-            "discord",
-            "notification"
+            "frontend",
+            "ux"
           ]
         },
-        "ST-20251113-act-004-03-event-integration": {
+        "ST-20251113-act-002-03-api-integration": {
           "seed_id": null,
-          "title": "事件流接入与推荐策略",
+          "title": "接入查询接口并优化交互",
           "type": "coding",
-          "summary": "将 Discord 发送模块接入开放事件流，验证实测效果并记录默认策略。",
+          "summary": "将前端筛选 UI 与真实课程查询 API 打通，处理加载/错误与性能问题。",
           "acceptance_draft": [
-            "实现将开放事件转换为 Discord 消息的 adapter，支持频道过滤/模版。",
-            "在测试服务器实测多条通知，确保速率限制在可控范围并去重。",
-            "在 docs/discord_runbook.md 记录默认频道配置与如何禁用/切换策略。"
+            "实现 useCourseQuery Hook，整合分页、缓存与取消请求逻辑，支撑筛选组件。",
+            "为请求错误与空数据提供可视化反馈（Toast/提示语），并支持重试。",
+            "优化列表渲染（虚拟列表/去抖）确保常见筛选组合的交互不卡顿。"
           ],
           "lane": "next",
-          "priority_suggested": "P2",
+          "priority_suggested": "P1",
           "status": "todo",
           "dependencies": [
-            "ST-20251113-act-004-02-bot-sending",
-            "ST-20251113-act-010-02-polling-worker"
+            "ST-20251113-act-002-02-filter-components",
+            "ST-20251113-act-008-03-api-hardening"
           ],
           "blocked": false,
           "blocked_by": [],
-          "unblock_plan": "接入事件流后跑一轮通知，收集反馈并落文档。",
-          "estimate_h": 2,
-          "risk": "medium",
-          "confidence": 0.65,
+          "unblock_plan": "连通 API 后对慢查询场景进行 profiling，必要时回写后端需求。",
+          "estimate_h": 3,
+          "risk": "high",
+          "confidence": 0.6,
           "interfaces_touched": [
-            "discord-bot",
-            "notification-service"
+            "frontend",
+            "api"
           ],
           "artifacts": [
-            "docs/discord_runbook.md",
-            "reports/discord_channel_validation.md"
+            "frontend/src/hooks/useCourseQuery.ts",
+            "frontend/src/components/CourseList.tsx"
           ],
           "citations": [],
           "created_at": "2025-11-13T00:00:00Z",
           "updated_at": "2025-11-13T00:00:00Z",
           "owner": "tbd",
           "tags": [
-            "discord",
-            "notification"
+            "frontend",
+            "mvp"
           ]
         }
       }
@@ -1064,198 +1029,192 @@
         }
       }
     },
-    "T-20251113-act-006-deploy-docs-cicd": {
-      "seed_id": "ACT-006",
-      "title": "编写并验证本地一键部署文档与辅助脚本",
-      "type": "docs",
-      "summary": "围绕“本地数据库 + 轻量 API 服务 + 前端 UI + 后台通知进程”的架构，整理本地部署步骤与环境要求，编写 README 与辅助脚本，使普通用户在个人电脑或服务器上无需修改代码即可初始化数据库、运行 API/前端/通知服务并完成配置。",
+    "T-20251113-act-009-subscription-management": {
+      "seed_id": "ACT-009",
+      "title": "实现订阅管理接口与本地存储",
+      "type": "coding",
+      "summary": "为课程/Section 提供订阅与退订 UI，以及与数据库衔接的 /api/subscribe、/api/unsubscribe 等接口，将用户邮箱/Discord 标识与目标课程索引安全写入本地订阅表。",
       "acceptance_draft": [
-        "README 提供针对至少两种主流桌面操作系统（例如 Windows 与 macOS 或 Linux）的本地部署步骤，包含：安装 Node.js/bun、SQLite 或嵌入式数据库依赖、项目初始化、环境变量与密钥配置、如何执行数据库初始化/增量更新脚本，以及如何同时启动前端、API 服务与本地通知进程。",
-        "仓库包含可直接使用的本地辅助脚本（例如 scripts/setup_local_env.sh 和 scripts/run_local.sh），在一台全新环境的个人电脑上，用户 clone 仓库后运行脚本即可完成依赖安装校验、数据库初始化、服务启动与通知模块验证。"
+        "在课程列表或详情中提供“订阅空位”入口，点击后调用 /api/subscribe 写入数据库，并支持校验输入（邮箱或 Discord 标识）以及重复订阅提示。",
+        "实现 /api/unsubscribe（含带签名的退订链接）与订阅列表查询接口，用户可从邮件/Discord 链接或 UI 中退订，数据库记录同步更新。",
+        "在本地运行环境中执行一次完整流程（订阅→模拟开放→退订），确认数据库记录、API 响应与通知任务读取到的数据一致。"
       ],
-      "lane": "next",
-      "priority_suggested": "P1",
+      "lane": "now",
+      "priority_suggested": "P0",
       "status": "todo",
       "dependencies": [
-        "T-20251113-act-001-soc-json-scraper",
         "T-20251113-act-002-frontend-filter-mvp",
-        "T-20251113-act-003-mail-notify-function",
-        "T-20251113-act-008-local-query-api",
-        "T-20251113-act-009-subscription-management",
-        "T-20251113-act-010-local-polling-notify"
+        "T-20251113-act-007-local-db-schema",
+        "T-20251113-act-008-local-query-api"
       ],
       "blocked": false,
       "blocked_by": [],
-      "unblock_plan": "以本地单机运行与容器部署为一等公民目标设计流程：在至少两种主流桌面环境验证脚本可初始化 SQLite、启动 API/前端/通知服务，再整理成 README。",
+      "unblock_plan": "在完成课程列表与 API 基础后，扩展 UI 和接口，编写端到端测试验证订阅/退订流程与数据库同步。",
       "estimate_h": 6,
       "risk": "mid",
       "confidence": 0.7,
       "interfaces_touched": [
-        "docs",
-        "local-dev",
-        "deployment"
+        "frontend",
+        "api",
+        "database",
+        "notification-service"
       ],
       "artifacts": [
-        "README.md",
-        ".env.example",
-        "scripts/setup_local_env.sh",
-        "scripts/run_local.sh"
+        "src/components/subscription/*",
+        "services/api/routes/subscriptions.ts",
+        "db/subscriptions.sql"
       ],
       "citations": [
         "EVID-001",
-        "EVID-006",
-        "EVID-007",
-        "R-20251113-oss-governance"
+        "EVID-005",
+        "R-20251113-notify-delay"
       ],
       "created_at": "2025-11-13T00:00:00Z",
       "updated_at": "2025-11-13T00:00:00Z",
       "owner": "tbd",
       "tags": [
-        "seed:ACT-006",
-        "docs",
-        "deployment",
-        "local-deploy"
+        "seed:ACT-009",
+        "frontend",
+        "backend",
+        "notification"
       ],
       "subtasks": {
-        "ST-20251113-act-006-01-deploy-playbook": {
+        "ST-20251113-act-009-01-subscription-model": {
           "seed_id": null,
-          "title": "从零部署步骤梳理",
+          "title": "订阅数据结构与接口契约",
           "type": "docs",
-          "summary": "整理从空机器到运行浏览/UI/订阅/通知全链路的步骤，形成部署清单。",
+          "summary": "决定订阅记录的表结构、字段与 API 行为，为后续写入逻辑和前端交互奠定契约。",
           "acceptance_draft": [
-            "输出 docs/deployment_playbook.md，列出依赖安装、环境变量、脚本顺序和预期输出。",
-            "包含验证步骤：抓取数据、跑查询、成功订阅并收到邮件/Discord 通知。",
-            "附常见问题与排障提示，覆盖数据抓取失败、通知模块失败等情况。"
+            "定义 subscriptions 表字段（user contact、term、section index、偏好、状态），含唯一约束与状态机。",
+            "描述 subscribe/unsubscribe API payload、响应与幂等语义，附示例。",
+            "列出安全策略（速率限制、邮箱格式校验、重复订阅处理）。"
           ],
           "lane": "next",
-          "priority_suggested": "P0",
+          "priority_suggested": "P1",
           "status": "todo",
           "dependencies": [
-            "ST-20251113-act-003-03-end-to-end-validation",
-            "ST-20251113-act-004-03-event-integration",
-            "ST-20251113-act-005-03-language-toggle"
+            "ST-20251113-act-007-01-entity-design"
           ],
           "blocked": false,
           "blocked_by": [],
-          "unblock_plan": "在功能闭环后复盘通路，梳理完整步骤并记录在 playbook。",
+          "unblock_plan": "与数据建模输出同步，白板确定状态机后写入文档。",
           "estimate_h": 2,
           "risk": "medium",
-          "confidence": 0.69,
+          "confidence": 0.72,
           "interfaces_touched": [
-            "docs",
-            "deployment"
+            "database",
+            "docs"
           ],
           "artifacts": [
-            "docs/deployment_playbook.md"
+            "docs/subscription_model.md"
           ],
           "citations": [],
           "created_at": "2025-11-13T00:00:00Z",
           "updated_at": "2025-11-13T00:00:00Z",
           "owner": "tbd",
           "tags": [
-            "deployment",
-            "docs",
-            "local-deploy"
+            "database",
+            "docs"
           ]
         },
-        "ST-20251113-act-006-02-automation-scripts": {
+        "ST-20251113-act-009-02-subscribe-endpoints": {
           "seed_id": null,
-          "title": "部署流程脚本化",
+          "title": "订阅/退订接口与写入逻辑实现",
           "type": "coding",
-          "summary": "将部署步骤脚本化（安装、迁移、抓取、启动服务），支撑本地/一键部署体验。",
+          "summary": "实现后端订阅/退订接口，处理幂等、重复订阅与安全校验，并落库。",
           "acceptance_draft": [
-            "提供 setup_local_env.sh or make/just 任务，自动安装依赖、执行迁移与抓取。",
-            "实现 run_stack.sh 等脚本一键启动 API、前端、worker，附日志输出。",
-            "脚本容错并返回非零状态供 CI 使用。"
+            "提供 REST/GraphQL endpoint，校验请求，写入数据库并返回最新状态。",
+            "对重复订阅、退订后重订等场景做幂等处理并记录审计日志。",
+            "补充测试覆盖非法输入、频繁点击、超限等场景。"
           ],
           "lane": "next",
           "priority_suggested": "P1",
           "status": "todo",
           "dependencies": [
-            "ST-20251113-act-006-01-deploy-playbook",
-            "ST-20251113-act-001-03-data-verification"
+            "ST-20251113-act-009-01-subscription-model",
+            "ST-20251113-act-001-02-ingest-impl"
           ],
           "blocked": false,
           "blocked_by": [],
-          "unblock_plan": "依据 playbook 编写 shell/Justfile，逐一脚本化抓取、迁移与启动动作。",
+          "unblock_plan": "先落 DB 接口，再写业务校验与审计日志，最后补测试。",
           "estimate_h": 3,
           "risk": "medium",
-          "confidence": 0.7,
+          "confidence": 0.65,
           "interfaces_touched": [
-            "deployment",
-            "build-script"
+            "api",
+            "database"
           ],
           "artifacts": [
-            "scripts/setup_local_env.sh",
-            "scripts/run_stack.sh"
+            "api/src/routes/subscriptions.ts",
+            "api/tests/subscriptions.test.ts"
           ],
           "citations": [],
           "created_at": "2025-11-13T00:00:00Z",
           "updated_at": "2025-11-13T00:00:00Z",
           "owner": "tbd",
           "tags": [
-            "deployment",
-            "local-deploy"
+            "backend",
+            "notification"
           ]
         },
-        "ST-20251113-act-006-03-fresh-run": {
+        "ST-20251113-act-009-03-frontend-flow": {
           "seed_id": null,
-          "title": "新手视角试跑与 README 迭代",
-          "type": "docs",
-          "summary": "以新手视角完整跑一遍脚本，记录过程并迭代 README/Quick Start。",
+          "title": "前端订阅流与端到端验证",
+          "type": "coding",
+          "summary": "在前端课程列表/详情中提供订阅入口，连通后端接口并验证端到端流程。",
           "acceptance_draft": [
-            "使用全新环境执行部署脚本，记录每一步耗时与遇到的问题。",
-            "根据反馈更新 README/Quickstart，加入截图或终端输出示例。",
-            "整理 reports/fresh_install_log.md，列出剩余风险与 TODO。"
+            "在课程列表/详情中添加订阅/退订入口，结合登录-free 模式设计用户输入。",
+            "集成后端 API，提供加载与错误状态提示，支持重复点击防抖。",
+            "跑一次端到端流程验证数据库记录变化，并记录操作说明。"
           ],
           "lane": "next",
           "priority_suggested": "P1",
           "status": "todo",
           "dependencies": [
-            "ST-20251113-act-006-02-automation-scripts"
+            "ST-20251113-act-009-02-subscribe-endpoints",
+            "ST-20251113-act-002-03-api-integration"
           ],
           "blocked": false,
           "blocked_by": [],
-          "unblock_plan": "找非项目成员试跑或自建干净容器记录过程，实时更新文档。",
-          "estimate_h": 2,
+          "unblock_plan": "先以假数据实现 UI，再切换真实 API 并手测完整链路。",
+          "estimate_h": 3,
           "risk": "medium",
-          "confidence": 0.73,
+          "confidence": 0.64,
           "interfaces_touched": [
-            "docs",
-            "deployment"
+            "frontend",
+            "api"
           ],
           "artifacts": [
-            "README.md",
-            "docs/quickstart.md",
-            "reports/fresh_install_log.md"
+            "frontend/src/components/SubscribeButton.tsx",
+            "frontend/src/pages/CourseDetail.tsx"
           ],
           "citations": [],
           "created_at": "2025-11-13T00:00:00Z",
           "updated_at": "2025-11-13T00:00:00Z",
           "owner": "tbd",
           "tags": [
-            "deployment",
-            "docs",
-            "local-deploy"
+            "frontend",
+            "notification"
           ]
         }
       }
     },
-    "T-20251113-act-007-local-db-schema": {
-      "seed_id": "ACT-007",
-      "title": "设计本地数据库模式与增量更新机制",
+    "T-20251113-act-010-local-polling-notify": {
+      "seed_id": "ACT-010",
+      "title": "本地空位轮询与通知调度服务",
       "type": "coding",
-      "summary": "定义 SQLite 等嵌入式数据库中的课程、Section、会议信息与订阅表结构，设计索引与约束，并实现初始化/迁移与增量更新策略，使数据成为筛选与通知的单一可信源。",
+      "summary": "实现常驻后台任务或定时器，每 30–60 秒轮询 Rutgers openSections 接口，结合本地订阅数据判断课程状态变化，触发事件管道供邮箱/Discord 等通道消费，并处理幂等与错误恢复。",
       "acceptance_draft": [
-        "提供 schema 定义（课程、Section、meeting_times、订阅等表）与必要索引/约束，字段覆盖 FR-01/FR-02/FR-04 所需信息，并附带 ER/说明文档。",
-        "实现 scripts/migrate_db.* 可初始化或升级数据库，重复运行不会破坏已有数据；随机抽样记录验证字段与 SOC 返回一致。",
-        "定义增量更新策略（例如基于 upsert、事务或临时表交换），在模拟部分课程状态变化的场景下，仅更新发生变化的数据且不中断前端/API 查询。"
+        "可配置轮询频率与 term/campus 范围，模拟 Section 状态从 Closed→Open 的过程，确认在一个轮询周期内生成事件并写入去重缓存。",
+        "同一开放事件最多触发一次通知，短时间内频繁开关的 Section 不会造成重复推送；提供幂等键或状态表来记录已通知事件。",
+        "轮询任务具备日志、指标与错误恢复能力（例如网络失败自动重试、进程重启后继续），并可将事件推送到邮箱/Discord 等通道的队列。"
       ],
       "lane": "now",
       "priority_suggested": "P0",
       "status": "todo",
       "dependencies": [
-        "T-20251113-soc-api-validation"
+        "T-20251113-act-007-local-db-schema",
+        "T-20251113-act-009-subscription-management"
       ],
       "blocked": true,
       "blocked_by": [
@@ -1265,510 +1224,532 @@
           "type": "api",
           "status": "unknown",
           "doc_url": "https://github.com/anxious-engineer/Rutgers-Course-API",
-          "note": "接口结构与速率限制需要先通过 T-20251113-soc-api-validation 实测后，才能确定 schema 设计所需字段。"
+          "note": "需要确认 openSections 的速率限制与字段稳定性后才能设定本地轮询与节流策略。"
         }
       ],
-      "unblock_plan": "在 T-20251113-soc-api-validation 中确认字段/速率后，设计 schema 与索引并用小样本跑通迁移脚本，再推广到完整数据集。",
+      "unblock_plan": "基于 T-20251113-soc-api-validation 成果，选定轮询频率与批量参数，先在小范围 term/campus 上验证事件生成、幂等与日志，再扩展到完整数据集。",
       "estimate_h": 8,
-      "risk": "mid",
-      "confidence": 0.65,
+      "risk": "high",
+      "confidence": 0.6,
       "interfaces_touched": [
-        "database",
-        "data-pipeline"
+        "local-service",
+        "notification-service",
+        "scheduler"
       ],
       "artifacts": [
-        "db/schema.sql",
-        "scripts/migrate_db.ts",
-        "docs/db_schema.md"
+        "services/notifier/poller.ts",
+        "services/notifier/event_store.ts",
+        "tests/notifier/poller.test.ts"
       ],
       "citations": [
         "EVID-001",
-        "EVID-002",
-        "EVID-006",
-        "R-20251113-frontend-perf"
+        "EVID-003",
+        "R-20251113-notify-delay"
       ],
       "created_at": "2025-11-13T00:00:00Z",
       "updated_at": "2025-11-13T00:00:00Z",
       "owner": "tbd",
       "tags": [
-        "seed:ACT-007",
+        "seed:ACT-010",
         "backend",
-        "database",
-        "data-pipeline"
+        "notification",
+        "scheduler"
       ],
       "subtasks": {
-        "ST-20251113-act-007-01-entity-design": {
+        "ST-20251113-act-010-01-event-spec": {
           "seed_id": null,
-          "title": "本地课程实体模型设计",
+          "title": "开放事件模型与轮询策略设计",
           "type": "docs",
-          "summary": "结合 SOC 字段矩阵与产品需求，设计 courses/sections/meetings/instructors/subscriptions 等实体结构与索引策略。",
+          "summary": "设计 openSections 轮询输出的“开放事件”结构、状态转移与轮询节奏，确保与订阅数据契合。",
           "acceptance_draft": [
-            "完成包含主键、外键、字段类型、索引的 ER 图/文档，覆盖课程、Section、Meeting、订阅及辅助表。",
-            "列出 SOC 字段到本地字段的映射及转换规则，标注需要推导的字段。",
-            "描述关键索引（term+campus+subject、section index）与存储约束，给出 rationale。"
+            "定义 open_event 表/结构：subscription_id、section_id、seat_delta、event_at、来源等字段。",
+            "规划轮询节奏（term/campus 频率、顺序、并发）及退避策略，对应限流结论。",
+            "记录事件生命周期（发现→通知→归档）与反复 oscillation 处理。"
           ],
-          "lane": "now",
-          "priority_suggested": "P0",
+          "lane": "next",
+          "priority_suggested": "P1",
           "status": "todo",
           "dependencies": [
-            "ST-20251113-soc-api-validation-02-field-matrix"
+            "ST-20251113-act-009-01-subscription-model",
+            "ST-20251113-act-001-03-data-verification"
           ],
           "blocked": false,
           "blocked_by": [],
-          "unblock_plan": "同步 SOC 字段矩阵结论，快速迭代文档草稿，邀评后定稿。",
-          "estimate_h": 3,
+          "unblock_plan": "整合订阅表结构与数据 runbook，快速列出事件字段与轮询节奏图。",
+          "estimate_h": 2,
           "risk": "medium",
-          "confidence": 0.7,
+          "confidence": 0.71,
           "interfaces_touched": [
-            "database",
-            "docs"
+            "scheduler",
+            "data-pipeline"
           ],
           "artifacts": [
-            "docs/local_data_model.md"
+            "docs/open_event_spec.md"
           ],
           "citations": [],
           "created_at": "2025-11-13T00:00:00Z",
           "updated_at": "2025-11-13T00:00:00Z",
           "owner": "tbd",
           "tags": [
-            "database",
-            "docs"
+            "scheduler",
+            "notification"
           ]
         },
-        "ST-20251113-act-007-02-migration-tooling": {
+        "ST-20251113-act-010-02-polling-worker": {
           "seed_id": null,
-          "title": "SQLite 迁移与初始化机制",
+          "title": "openSections 轮询 worker 实现",
           "type": "coding",
-          "summary": "实现可重复执行的建库/迁移脚本，为首次初始化与未来升级提供统一入口。",
+          "summary": "实现周期性调用 openSections、对比状态变化并记录开放事件的 worker。",
           "acceptance_draft": [
-            "提供 scripts/migrate_db.ts（或等效工具）以版本化 SQL，首次运行能创建 schema，重复执行只应用新迁移。",
-            "脚本支持指定数据库路径、dry-run/verbose 模式，并输出 data/migrations.log。",
-            "在空目录与已有数据库上各跑一次，确认无 destructive 写入且日志清晰。"
+            "Worker 根据配置定时调用 openSections，对比上次记录生成事件，写入数据库/队列。",
+            "处理订阅列表分片与并发，避免大批量订阅导致阻塞。",
+            "输出运行日志与 Prometheus 友好指标（请求数、事件数、错误率）。"
           ],
-          "lane": "now",
-          "priority_suggested": "P0",
+          "lane": "next",
+          "priority_suggested": "P1",
           "status": "todo",
           "dependencies": [
-            "ST-20251113-act-007-01-entity-design"
+            "ST-20251113-act-010-01-event-spec",
+            "ST-20251113-act-001-02-ingest-impl"
           ],
           "blocked": false,
           "blocked_by": [],
-          "unblock_plan": "根据定稿模型编写 schema.sql，再封装 CLI 与版本记录，最后补充 README 片段。",
+          "unblock_plan": "以单校园订阅集试跑 worker，调通后扩展配置与指标。",
           "estimate_h": 3,
-          "risk": "medium",
-          "confidence": 0.68,
+          "risk": "high",
+          "confidence": 0.62,
           "interfaces_touched": [
-            "database",
-            "build-script"
+            "scheduler",
+            "data-pipeline"
           ],
           "artifacts": [
-            "scripts/migrate_db.ts",
-            "data/schema.sql"
+            "workers/open_sections_poller.ts",
+            "logs/poller/*.log"
           ],
           "citations": [],
           "created_at": "2025-11-13T00:00:00Z",
           "updated_at": "2025-11-13T00:00:00Z",
           "owner": "tbd",
           "tags": [
-            "database",
-            "backend"
+            "scheduler",
+            "notification"
           ]
         },
-        "ST-20251113-act-007-03-incremental-strategy": {
+        "ST-20251113-act-010-03-resume-tests": {
           "seed_id": null,
-          "title": "增量更新策略验证",
+          "title": "长运行与重启恢复验证",
           "type": "coding",
-          "summary": "设计增量更新方案（diff 检测、重复运行策略），并使用小样本验证可重复/可回滚。",
+          "summary": "验证轮询 worker 在长时间运行与重启后的行为，确保事件不重复/不丢失。",
           "acceptance_draft": [
-            "明确增量判断逻辑（哈希对比、updated_at 字段等）并写进 docs/data_refresh_strategy.md。",
-            "对 ≥3 个 subject 做一次增量试跑，输出新增/更新/删除统计及执行耗时。",
-            "记录需要强制全量重建的触发条件与 runbook。"
+            "模拟 ≥2 小时运行并插入重启，确认事件流水无缺口，重复触发被去重。",
+            "实现状态检查点（最近轮询时间/哈希）并在 worker 重启后自动恢复。",
+            "撰写 reports/poller_durability.md，总结可观测指标与常见异常恢复流程。"
           ],
           "lane": "next",
           "priority_suggested": "P1",
           "status": "todo",
           "dependencies": [
-            "ST-20251113-act-007-02-migration-tooling",
-            "ST-20251113-soc-api-validation-03-limit-profile"
+            "ST-20251113-act-010-02-polling-worker"
           ],
           "blocked": false,
           "blocked_by": [],
-          "unblock_plan": "复用迁移脚本与限流结论，先跑单校区 diff，确认流程后扩展到多校区。",
+          "unblock_plan": "在 staging 运行 worker，频繁重启/断网测试并记录行为。",
           "estimate_h": 2,
           "risk": "medium",
-          "confidence": 0.62,
+          "confidence": 0.67,
           "interfaces_touched": [
-            "database",
-            "data-pipeline"
+            "scheduler",
+            "observability"
           ],
           "artifacts": [
-            "docs/data_refresh_strategy.md",
-            "notebooks/incremental_trial.md"
+            "reports/poller_durability.md",
+            "scripts/poller_checkpoint.json"
           ],
           "citations": [],
           "created_at": "2025-11-13T00:00:00Z",
           "updated_at": "2025-11-13T00:00:00Z",
           "owner": "tbd",
           "tags": [
-            "database",
-            "data-pipeline"
+            "scheduler",
+            "notification"
           ]
         }
       }
     },
-    "T-20251113-act-008-local-query-api": {
-      "seed_id": "ACT-008",
-      "title": "实现本地课程查询 API 服务",
+    "T-20251113-act-011-mail-sender-module": {
+      "seed_id": "ACT-011",
+      "title": "邮件发送模块多平台支持",
       "type": "coding",
-      "summary": "基于 SQLite 数据库实现 RESTful API（如 /api/courses、/api/sections、/api/filters），支持多字段过滤、分页与排序，为前端筛选与订阅面板提供一致的数据访问层。",
+      "summary": "抽象邮件发送接口并提供至少 SendGrid API 与 SMTP 两种实现，允许通过配置切换，同时支持多语言模板、速率限制与失败重试，以方便不同部署者使用自有邮件服务。",
       "acceptance_draft": [
-        "实现至少 /api/courses 与 /api/sections 两个端点，接受 term/campus/subject/关键字/时间/core_code/level 等查询参数，返回 JSON 包含分页信息，任意组合筛选均能得到与数据库一致的结果。",
-        "在 4500+ 课程数据规模下，常见查询（含 3~5 个过滤条件）响应时间 < 300 ms，提供必要索引与缓存并通过压测记录指标。",
-        "API 提供错误处理与健康检查端点（例如 /api/health），当前端无法连接时能返回明确错误码与原因，便于 UI 友好提示。"
+        "提供统一的 MailSender 接口与配置（API key、SMTP host、发件人等），可在不改代码的情况下切换 SendGrid 与 SMTP，实现都能发送测试邮件。",
+        "邮件内容模板支持中英文版本，可注入课程名、Index、订阅者信息等变量；模板缺少翻译或字段时能在构建/测试阶段捕获。",
+        "在模拟配额用尽或网络错误时，模块能降级重试或记录清晰错误日志，不会导致主进程崩溃。"
       ],
-      "lane": "now",
-      "priority_suggested": "P0",
+      "lane": "next",
+      "priority_suggested": "P1",
       "status": "todo",
       "dependencies": [
-        "T-20251113-act-007-local-db-schema",
-        "T-20251113-act-001-soc-json-scraper"
+        "T-20251113-act-009-subscription-management"
       ],
       "blocked": false,
       "blocked_by": [],
-      "unblock_plan": "复用抓取脚本产出的 SQLite 数据，挑选轻量框架（Express/Fastify/FastAPI 等）实现端点，并通过自动化测试覆盖主要组合筛选。",
-      "estimate_h": 8,
+      "unblock_plan": "在完成订阅存储后，先实现 SendGrid 版本，再扩展 SMTP/本地邮件发送，并接入邮件模板与单元测试。",
+      "estimate_h": 5,
       "risk": "mid",
       "confidence": 0.7,
       "interfaces_touched": [
-        "backend",
-        "api",
-        "database"
+        "notification-service",
+        "email-provider",
+        "i18n"
       ],
       "artifacts": [
-        "services/api/server.ts",
-        "services/api/routes/courses.ts",
-        "tests/api/courses.test.ts"
+        "services/notify/mail_sender.ts",
+        "config/email.example.json",
+        "templates/email/*"
       ],
       "citations": [
         "EVID-001",
-        "EVID-006",
-        "R-20251113-frontend-perf"
+        "EVID-005",
+        "R-20251113-spam"
       ],
       "created_at": "2025-11-13T00:00:00Z",
       "updated_at": "2025-11-13T00:00:00Z",
       "owner": "tbd",
       "tags": [
-        "seed:ACT-008",
+        "seed:ACT-011",
         "backend",
-        "api",
-        "database"
+        "email",
+        "notification"
       ],
       "subtasks": {
-        "ST-20251113-act-008-01-contract": {
+        "ST-20251113-act-011-01-mail-interface": {
           "seed_id": null,
-          "title": "课程查询接口契约与服务骨架",
-          "type": "coding",
-          "summary": "定义课程查询 API 的输入/输出契约，搭建基础服务骨架并做好请求校验。",
+          "title": "邮件发送接口与配置基线",
+          "type": "docs",
+          "summary": "定义统一的邮件发送接口、配置方式与 secrets 需求，为 worker 提供稳定抽象。",
           "acceptance_draft": [
-            "在 docs/query_api_contract.md 中描述支持的过滤项、排序、分页与返回字段结构。",
-            "创建服务骨架（例如 Fastify/Express），包含 routing、DI、配置加载。",
-            "添加请求体验证与基础日志中间件，便于后续扩展。"
+            "在 docs/mail_sender_contract.md 描述 MailSender 接口方法、payload 字段与返回值。",
+            "梳理配置项（provider、速率限制、重试、模板路径）并提供 sample config。",
+            "列出安全要求（API key 存储、超时设置），附测试计划。"
           ],
           "lane": "next",
           "priority_suggested": "P1",
           "status": "todo",
           "dependencies": [
-            "ST-20251113-act-001-03-data-verification"
+            "ST-20251113-act-010-01-event-spec"
           ],
           "blocked": false,
           "blocked_by": [],
-          "unblock_plan": "基于数据 runbook 的字段定义编写契约，再 scaffolding 服务。",
-          "estimate_h": 3,
+          "unblock_plan": "调研现有 provider/SDK，先输出接口草案，再确认配置字段。",
+          "estimate_h": 2,
           "risk": "medium",
-          "confidence": 0.7,
+          "confidence": 0.71,
           "interfaces_touched": [
-            "api",
-            "database"
+            "notification-service",
+            "docs"
           ],
           "artifacts": [
-            "docs/query_api_contract.md",
-            "api/src/server.ts"
+            "docs/mail_sender_contract.md",
+            "configs/mail_sender.example.json"
           ],
           "citations": [],
           "created_at": "2025-11-13T00:00:00Z",
           "updated_at": "2025-11-13T00:00:00Z",
           "owner": "tbd",
           "tags": [
-            "api",
-            "backend"
+            "email",
+            "notification"
           ]
         },
-        "ST-20251113-act-008-02-filter-engine": {
+        "ST-20251113-act-011-02-provider-adapter": {
           "seed_id": null,
-          "title": "本地查询与筛选实现",
+          "title": "首个邮件 Provider 适配层",
           "type": "coding",
-          "summary": "实现依赖 SQLite 的查询层，覆盖多维过滤、分页与高级筛选。",
+          "summary": "基于 MailSender 抽象实现至少一种 provider（SMTP 或 API）的适配层，并附带测试。",
           "acceptance_draft": [
-            "实现查询 builder/DAO，支持 term、campus、subject、核心要求、时间段等组合过滤。",
-            "覆盖高级条件（可空位、授课模式、Instructor 关键字），结果支持分页且稳定排序。",
-            "添加单元/集成测试验证常见过滤组合。"
+            "实现 notifications/mail/providers/smtp.ts（或其他）并通过接口测试，处理连接池/超时。",
+            "提供模板渲染/变量替换支持，便于 worker 生成内容。",
+            "写集成测试使用 mock server 验证调用参数与错误处理。"
           ],
           "lane": "next",
           "priority_suggested": "P1",
           "status": "todo",
           "dependencies": [
-            "ST-20251113-act-008-01-contract"
+            "ST-20251113-act-011-01-mail-interface"
           ],
           "blocked": false,
           "blocked_by": [],
-          "unblock_plan": "先实现基础查询，再迭代增加高级过滤与测试用例。",
+          "unblock_plan": "选定 provider SDK，先写 mock + adapter，再完善日志与 metrics。",
           "estimate_h": 3,
-          "risk": "high",
-          "confidence": 0.63,
+          "risk": "medium",
+          "confidence": 0.68,
           "interfaces_touched": [
-            "api",
-            "filter-logic"
+            "notification-service",
+            "email-provider"
           ],
           "artifacts": [
-            "api/src/queries/course_search.ts",
-            "api/tests/course_search.test.ts"
+            "notifications/mail/providers/smtp.ts",
+            "notifications/mail/tests/provider.test.ts"
           ],
           "citations": [],
           "created_at": "2025-11-13T00:00:00Z",
           "updated_at": "2025-11-13T00:00:00Z",
           "owner": "tbd",
           "tags": [
-            "api",
-            "filter"
+            "email",
+            "backend"
           ]
         },
-        "ST-20251113-act-008-03-api-hardening": {
+        "ST-20251113-act-011-03-retry-tuning": {
           "seed_id": null,
-          "title": "错误处理、健康检查与日志",
+          "title": "失败重试与速率限制策略",
           "type": "coding",
-          "summary": "补齐查询服务的健康探针、错误处理与可观测性，保证前端/worker 能稳定依赖。",
+          "summary": "为邮件模块加入重试、速率限制与可观测性，形成推荐使用指南。",
           "acceptance_draft": [
-            "实现 /health 与 /ready 探针，检查数据库连通性与必要表存在。",
-            "统一错误处理返回结构，附 trace id，配置结构化日志输出查询指标。",
-            "记录运维注意事项（端口、环境变量、限流）到 docs/query_api_contract.md 或附录。"
+            "实现重试队列/退避策略（最多 N 次）并对幂等 key 做保护。",
+            "加入速率限制器，支持 provider 配额/速率配置，超出时排队。",
+            "在 docs/mail_sender_usage.md 记录推荐配置与故障排查方法。"
           ],
           "lane": "next",
           "priority_suggested": "P1",
           "status": "todo",
           "dependencies": [
-            "ST-20251113-act-008-02-filter-engine"
+            "ST-20251113-act-011-02-provider-adapter"
           ],
           "blocked": false,
           "blocked_by": [],
-          "unblock_plan": "在已有服务基础上加入健康探针与日志，并更新文档提醒使用方式。",
+          "unblock_plan": "复用 provider adapter，增加重试环节并结合 metrics，最后写 runbook。",
           "estimate_h": 2,
           "risk": "medium",
-          "confidence": 0.74,
+          "confidence": 0.69,
           "interfaces_touched": [
-            "api",
+            "notification-service",
             "observability"
           ],
           "artifacts": [
-            "api/src/health.ts",
-            "api/src/middleware/logging.ts"
+            "notifications/mail/retry_policy.ts",
+            "docs/mail_sender_usage.md"
           ],
           "citations": [],
           "created_at": "2025-11-13T00:00:00Z",
           "updated_at": "2025-11-13T00:00:00Z",
           "owner": "tbd",
           "tags": [
-            "api",
-            "backend"
+            "email",
+            "notification"
           ]
         }
       }
     },
-    "T-20251113-act-009-subscription-management": {
-      "seed_id": "ACT-009",
-      "title": "实现订阅管理接口与本地存储",
+    "T-20251113-act-003-mail-notify-function": {
+      "seed_id": "ACT-003",
+      "title": "实现课程空位邮件通知功能（本地定时任务）",
       "type": "coding",
-      "summary": "为课程/Section 提供订阅与退订 UI，以及与数据库衔接的 /api/subscribe、/api/unsubscribe 等接口，将用户邮箱/Discord 标识与目标课程索引安全写入本地订阅表。",
+      "summary": "依据 D-20251113-notify-channels-email-discord，在每个部署环境中运行本地后台进程定期轮询 SOC openSections，结合本地数据库中的订阅记录判断 Closed→Open 事件，并通过可配置的邮件发送模块通知用户，满足 FR-04/FR-05/FR-06 与 NFR-02 的延迟与可靠性要求。",
       "acceptance_draft": [
-        "在课程列表或详情中提供“订阅空位”入口，点击后调用 /api/subscribe 写入数据库，并支持校验输入（邮箱或 Discord 标识）以及重复订阅提示。",
-        "实现 /api/unsubscribe（含带签名的退订链接）与订阅列表查询接口，用户可从邮件/Discord 链接或 UI 中退订，数据库记录同步更新。",
-        "在本地运行环境中执行一次完整流程（订阅→模拟开放→退订），确认数据库记录、API 响应与通知任务读取到的数据一致。"
+        "在本地测试环境模拟 Closed→Open 场景时，记录从状态变化到邮件发送的时间，平均延迟 < 30 秒、最大延迟 < 60 秒，且同一开放事件同一邮箱只收到 1 封邮件。",
+        "邮件正文包含课程名称、Index、Section、上课时间地点与订阅人信息，并提供安全的本地退订/管理链接；退订后同一订阅不再收到后续通知。",
+        "本地通知进程支持自定义轮询频率、日志与错误重试，能够在网络异常/进程重启后恢复状态，不会静默丢失事件。"
       ],
       "lane": "now",
       "priority_suggested": "P0",
       "status": "todo",
       "dependencies": [
-        "T-20251113-act-002-frontend-filter-mvp",
-        "T-20251113-act-007-local-db-schema",
-        "T-20251113-act-008-local-query-api"
+        "T-20251113-act-009-subscription-management",
+        "T-20251113-act-010-local-polling-notify",
+        "T-20251113-act-011-mail-sender-module"
       ],
-      "blocked": false,
-      "blocked_by": [],
-      "unblock_plan": "在完成课程列表与 API 基础后，扩展 UI 和接口，编写端到端测试验证订阅/退订流程与数据库同步。",
-      "estimate_h": 6,
-      "risk": "mid",
-      "confidence": 0.7,
+      "blocked": true,
+      "blocked_by": [
+        {
+          "dep_id": "DEP-001",
+          "name": "Rutgers SOC API（courses.json / openSections）",
+          "type": "api",
+          "status": "unknown",
+          "doc_url": "https://github.com/anxious-engineer/Rutgers-Course-API",
+          "note": "接口无正式公开文档，速率限制与长期稳定性未知；若访问策略收紧，将影响通知准确性。"
+        },
+        {
+          "dep_id": "DEP-002",
+          "name": "SendGrid 或同类邮件发送服务",
+          "type": "api",
+          "status": "approved",
+          "doc_url": "",
+          "note": "免费额度有限且需要正确配置发件域名与内容策略，以降低被判为垃圾邮件的风险。"
+        }
+      ],
+      "unblock_plan": "基于 T-20251113-act-010-local-polling-notify 提供的轮询结果与 T-20251113-act-011-mail-sender-module 中的发送适配器，设计本地 cron/worker，验证多次重试与恢复逻辑后再开放配置。",
+      "estimate_h": 8,
+      "risk": "high",
+      "confidence": 0.65,
       "interfaces_touched": [
-        "frontend",
-        "api",
-        "database",
-        "notification-service"
+        "local-service",
+        "notification-service",
+        "email-provider",
+        "scheduler"
       ],
       "artifacts": [
-        "src/components/subscription/*",
-        "services/api/routes/subscriptions.ts",
-        "db/subscriptions.sql"
+        "services/notifier/email_worker.ts",
+        "templates/email/*",
+        "config/email.json"
       ],
       "citations": [
         "EVID-001",
+        "EVID-003",
         "EVID-005",
-        "R-20251113-notify-delay"
+        "R-20251113-notify-delay",
+        "R-20251113-spam"
       ],
       "created_at": "2025-11-13T00:00:00Z",
       "updated_at": "2025-11-13T00:00:00Z",
       "owner": "tbd",
       "tags": [
-        "seed:ACT-009",
-        "frontend",
+        "seed:ACT-003",
         "backend",
+        "email",
         "notification"
       ],
       "subtasks": {
-        "ST-20251113-act-009-01-subscription-model": {
+        "ST-20251113-act-003-01-worker-contract": {
           "seed_id": null,
-          "title": "订阅数据结构与接口契约",
+          "title": "邮件通知 worker 契约",
           "type": "docs",
-          "summary": "决定订阅记录的表结构、字段与 API 行为，为后续写入逻辑和前端交互奠定契约。",
+          "summary": "定义开放事件到邮件 worker 的 payload/队列契约，确定幂等与重试语义。",
           "acceptance_draft": [
-            "定义 subscriptions 表字段（user contact、term、section index、偏好、状态），含唯一约束与状态机。",
-            "描述 subscribe/unsubscribe API payload、响应与幂等语义，附示例。",
-            "列出安全策略（速率限制、邮箱格式校验、重复订阅处理）。"
+            "描述 queue payload 字段（event_id、subscription_id、template_id、locale），附 JSON Schema。",
+            "定义 ack/nack、重试/死信策略，以及 MailSender 调用期望。",
+            "记录版本控制策略，确保未来扩展兼容旧 worker。"
           ],
           "lane": "next",
-          "priority_suggested": "P1",
+          "priority_suggested": "P0",
           "status": "todo",
           "dependencies": [
-            "ST-20251113-act-007-01-entity-design"
+            "ST-20251113-act-010-02-polling-worker",
+            "ST-20251113-act-011-01-mail-interface"
           ],
           "blocked": false,
           "blocked_by": [],
-          "unblock_plan": "与数据建模输出同步，白板确定状态机后写入文档。",
+          "unblock_plan": "梳理事件字段与邮件接口需要的信息，写出 schema 与重试语义。",
           "estimate_h": 2,
           "risk": "medium",
-          "confidence": 0.72,
+          "confidence": 0.7,
           "interfaces_touched": [
-            "database",
+            "notification-service",
             "docs"
           ],
           "artifacts": [
-            "docs/subscription_model.md"
+            "docs/mail_worker_contract.md"
           ],
           "citations": [],
           "created_at": "2025-11-13T00:00:00Z",
           "updated_at": "2025-11-13T00:00:00Z",
           "owner": "tbd",
           "tags": [
-            "database",
+            "notification",
             "docs"
           ]
         },
-        "ST-20251113-act-009-02-subscribe-endpoints": {
+        "ST-20251113-act-003-02-worker-implementation": {
           "seed_id": null,
-          "title": "订阅/退订接口与写入逻辑实现",
+          "title": "邮件 worker 实现",
           "type": "coding",
-          "summary": "实现后端订阅/退订接口，处理幂等、重复订阅与安全校验，并落库。",
+          "summary": "实现消费开放事件、拼装邮件内容并调用 MailSender 的 worker 进程。",
           "acceptance_draft": [
-            "提供 REST/GraphQL endpoint，校验请求，写入数据库并返回最新状态。",
-            "对重复订阅、退订后重订等场景做幂等处理并记录审计日志。",
-            "补充测试覆盖非法输入、频繁点击、超限等场景。"
+            "实现 workers/mail_dispatcher.ts，拉取事件+订阅信息，按模板拼装多语言邮件。",
+            "集成 MailSender 适配层，记录发送成功/失败与重试情况。",
+            "添加集成测试，验证示例事件能发送预期内容。"
           ],
           "lane": "next",
-          "priority_suggested": "P1",
+          "priority_suggested": "P0",
           "status": "todo",
           "dependencies": [
-            "ST-20251113-act-009-01-subscription-model",
-            "ST-20251113-act-001-02-ingest-impl"
+            "ST-20251113-act-003-01-worker-contract",
+            "ST-20251113-act-011-02-provider-adapter"
           ],
           "blocked": false,
           "blocked_by": [],
-          "unblock_plan": "先落 DB 接口，再写业务校验与审计日志，最后补测试。",
+          "unblock_plan": "基于契约实现 worker，优先跑单个事件端到端，再补上线控制。",
           "estimate_h": 3,
-          "risk": "medium",
-          "confidence": 0.65,
+          "risk": "high",
+          "confidence": 0.63,
           "interfaces_touched": [
-            "api",
+            "notification-service",
             "database"
           ],
           "artifacts": [
-            "api/src/routes/subscriptions.ts",
-            "api/tests/subscriptions.test.ts"
+            "workers/mail_dispatcher.ts",
+            "workers/tests/mail_dispatcher.test.ts"
           ],
           "citations": [],
           "created_at": "2025-11-13T00:00:00Z",
           "updated_at": "2025-11-13T00:00:00Z",
           "owner": "tbd",
           "tags": [
-            "backend",
-            "notification"
+            "notification",
+            "email"
           ]
         },
-        "ST-20251113-act-009-03-frontend-flow": {
+        "ST-20251113-act-003-03-end-to-end-validation": {
           "seed_id": null,
-          "title": "前端订阅流与端到端验证",
-          "type": "coding",
-          "summary": "在前端课程列表/详情中提供订阅入口，连通后端接口并验证端到端流程。",
+          "title": "端到端延迟与幂等验证",
+          "type": "research",
+          "summary": "验证事件→队列→邮件的整体延迟、失败重试与幂等行为，形成监控指标。",
           "acceptance_draft": [
-            "在课程列表/详情中添加订阅/退订入口，结合登录-free 模式设计用户输入。",
-            "集成后端 API，提供加载与错误状态提示，支持重复点击防抖。",
-            "跑一次端到端流程验证数据库记录变化，并记录操作说明。"
+            "模拟真实事件流，测量从 open event 到邮件送达的延迟并记录统计。",
+            "重复投递同一事件，确认 dedupe key 起效，不会对同一用户轰炸邮件。",
+            "在 docs/notify_runbook.md 记录 SLO、报警阈值与排障步骤。"
           ],
           "lane": "next",
-          "priority_suggested": "P1",
+          "priority_suggested": "P0",
           "status": "todo",
           "dependencies": [
-            "ST-20251113-act-009-02-subscribe-endpoints",
-            "ST-20251113-act-002-03-api-integration"
+            "ST-20251113-act-003-02-worker-implementation",
+            "ST-20251113-act-010-03-resume-tests",
+            "ST-20251113-act-011-03-retry-tuning"
           ],
           "blocked": false,
           "blocked_by": [],
-          "unblock_plan": "先以假数据实现 UI，再切换真实 API 并手测完整链路。",
-          "estimate_h": 3,
+          "unblock_plan": "搭建 staging 事件流，跑多轮压测并收集指标，再整理成文档。",
+          "estimate_h": 2,
           "risk": "medium",
-          "confidence": 0.64,
+          "confidence": 0.61,
           "interfaces_touched": [
-            "frontend",
-            "api"
+            "notification-service",
+            "observability"
           ],
           "artifacts": [
-            "frontend/src/components/SubscribeButton.tsx",
-            "frontend/src/pages/CourseDetail.tsx"
+            "reports/mail_worker_latency.md",
+            "docs/notify_runbook.md"
           ],
           "citations": [],
           "created_at": "2025-11-13T00:00:00Z",
           "updated_at": "2025-11-13T00:00:00Z",
           "owner": "tbd",
           "tags": [
-            "frontend",
-            "notification"
+            "notification",
+            "email"
           ]
         }
       }
     },
-    "T-20251113-act-010-local-polling-notify": {
-      "seed_id": "ACT-010",
-      "title": "本地空位轮询与通知调度服务",
+    "T-20251113-act-004-discord-notify-channel": {
+      "seed_id": "ACT-004",
+      "title": "实现 Discord 通知通道并评估私信与频道策略",
       "type": "coding",
-      "summary": "实现常驻后台任务或定时器，每 30–60 秒轮询 Rutgers openSections 接口，结合本地订阅数据判断课程状态变化，触发事件管道供邮箱/Discord 等通道消费，并处理幂等与错误恢复。",
+      "summary": "在本地通知管道中新增 Discord Bot 通道，运行本地 Bot 客户端将课程开放提醒发送给用户或频道，并结合 Q-04 评估“私信 vs 频道广播”的可行性、噪音与速率限制表现，为默认策略提供依据。",
       "acceptance_draft": [
-        "可配置轮询频率与 term/campus 范围，模拟 Section 状态从 Closed→Open 的过程，确认在一个轮询周期内生成事件并写入去重缓存。",
-        "同一开放事件最多触发一次通知，短时间内频繁开关的 Section 不会造成重复推送；提供幂等键或状态表来记录已通知事件。",
-        "轮询任务具备日志、指标与错误恢复能力（例如网络失败自动重试、进程重启后继续），并可将事件推送到邮箱/Discord 等通道的队列。"
+        "在本地或测试服务器中，Bot 能根据数据库内的订阅记录成功向指定用户或频道发送包含课程名、Index 与时间地点的提醒消息。",
+        "实现对 Discord API 速率限制的节流与重试逻辑，本地轮询高频触发时仍保持稳定，不出现长期封禁或严重错误。",
+        "文档中记录不同通知模式（私信/频道）的优缺点与推荐默认值，并与产品负责人达成一致。"
       ],
-      "lane": "now",
-      "priority_suggested": "P0",
+      "lane": "next",
+      "priority_suggested": "P2",
       "status": "todo",
       "dependencies": [
-        "T-20251113-act-007-local-db-schema",
-        "T-20251113-act-009-subscription-management"
+        "T-20251113-act-009-subscription-management",
+        "T-20251113-act-010-local-polling-notify",
+        "T-20251113-act-003-mail-notify-function"
       ],
       "blocked": true,
       "blocked_by": [
@@ -1778,320 +1759,339 @@
           "type": "api",
           "status": "unknown",
           "doc_url": "https://github.com/anxious-engineer/Rutgers-Course-API",
-          "note": "需要确认 openSections 的速率限制与字段稳定性后才能设定本地轮询与节流策略。"
+          "note": "接口结构与速率限制的不确定性会影响 Discord 通知的触发准确性。"
+        },
+        {
+          "dep_id": "DEP-003",
+          "name": "Discord Bot API",
+          "type": "api",
+          "status": "approved",
+          "doc_url": "",
+          "note": "受速率限制和内容政策约束，过于频繁或模板化的消息可能被限流或封禁。"
         }
       ],
-      "unblock_plan": "基于 T-20251113-soc-api-validation 成果，选定轮询频率与批量参数，先在小范围 term/campus 上验证事件生成、幂等与日志，再扩展到完整数据集。",
-      "estimate_h": 8,
-      "risk": "high",
+      "unblock_plan": "在本地环境运行 Bot，复用 T-20251113-act-010-local-polling-notify 的事件推送，结合 Discord Sandbox 逐步提升频率以摸清速率限制，再决定默认通知模式。",
+      "estimate_h": 6,
+      "risk": "mid",
       "confidence": 0.6,
       "interfaces_touched": [
         "local-service",
         "notification-service",
-        "scheduler"
+        "discord-bot"
       ],
       "artifacts": [
-        "services/notifier/poller.ts",
-        "services/notifier/event_store.ts",
-        "tests/notifier/poller.test.ts"
+        "services/notifier/discord_bot.ts",
+        "config/discord.json"
       ],
       "citations": [
         "EVID-001",
-        "EVID-003",
-        "R-20251113-notify-delay"
+        "EVID-004",
+        "R-20251113-notify-delay",
+        "R-20251113-spam"
       ],
       "created_at": "2025-11-13T00:00:00Z",
       "updated_at": "2025-11-13T00:00:00Z",
       "owner": "tbd",
       "tags": [
-        "seed:ACT-010",
+        "seed:ACT-004",
         "backend",
-        "notification",
-        "scheduler"
+        "discord",
+        "notification"
       ],
       "subtasks": {
-        "ST-20251113-act-010-01-event-spec": {
+        "ST-20251113-act-004-01-strategy": {
           "seed_id": null,
-          "title": "开放事件模型与轮询策略设计",
+          "title": "Discord 通知策略与配置",
           "type": "docs",
-          "summary": "设计 openSections 轮询输出的“开放事件”结构、状态转移与轮询节奏，确保与订阅数据契合。",
+          "summary": "确定 Discord 通知形式（私信/频道）、权限配置与默认使用策略，输出 runbook。",
           "acceptance_draft": [
-            "定义 open_event 表/结构：subscription_id、section_id、seat_delta、event_at、来源等字段。",
-            "规划轮询节奏（term/campus 频率、顺序、并发）及退避策略，对应限流结论。",
-            "记录事件生命周期（发现→通知→归档）与反复 oscillation 处理。"
+            "评估 DM vs 频道通知优缺点，确认 MVP 方案与 fallback。",
+            "整理 Bot 权限、Bot Token/频道 ID 配置方式，写 configs/discord_bot.example.json。",
+            "提供消息格式与速率限制建议，记录到 docs/discord_strategy.md。"
           ],
           "lane": "next",
-          "priority_suggested": "P1",
+          "priority_suggested": "P2",
           "status": "todo",
           "dependencies": [
-            "ST-20251113-act-009-01-subscription-model",
-            "ST-20251113-act-001-03-data-verification"
+            "ST-20251113-act-010-01-event-spec"
           ],
           "blocked": false,
           "blocked_by": [],
-          "unblock_plan": "整合订阅表结构与数据 runbook，快速列出事件字段与轮询节奏图。",
+          "unblock_plan": "调研 Discord API 限制，快速拉出策略对比表并定 MVP 默认。",
           "estimate_h": 2,
           "risk": "medium",
-          "confidence": 0.71,
+          "confidence": 0.7,
           "interfaces_touched": [
-            "scheduler",
-            "data-pipeline"
+            "discord-bot",
+            "docs"
           ],
           "artifacts": [
-            "docs/open_event_spec.md"
+            "docs/discord_strategy.md",
+            "configs/discord_bot.example.json"
           ],
           "citations": [],
           "created_at": "2025-11-13T00:00:00Z",
           "updated_at": "2025-11-13T00:00:00Z",
           "owner": "tbd",
           "tags": [
-            "scheduler",
+            "discord",
             "notification"
           ]
         },
-        "ST-20251113-act-010-02-polling-worker": {
+        "ST-20251113-act-004-02-bot-sending": {
           "seed_id": null,
-          "title": "openSections 轮询 worker 实现",
+          "title": "Discord Bot 发送能力",
           "type": "coding",
-          "summary": "实现周期性调用 openSections、对比状态变化并记录开放事件的 worker。",
+          "summary": "实现最小可用的 Discord Bot/ webhook 发送模块，支持私信或频道推送并记录日志。",
           "acceptance_draft": [
-            "Worker 根据配置定时调用 openSections，对比上次记录生成事件，写入数据库/队列。",
-            "处理订阅列表分片与并发，避免大批量订阅导致阻塞。",
-            "输出运行日志与 Prometheus 友好指标（请求数、事件数、错误率）。"
+            "实现 notifications/discord/bot.ts，可向指定频道/用户发送消息并处理异常。",
+            "加入 CLI/脚本可发送测试消息，用于部署验证。",
+            "记录成功/失败日志与速率限制触发情况。"
           ],
           "lane": "next",
-          "priority_suggested": "P1",
+          "priority_suggested": "P2",
           "status": "todo",
           "dependencies": [
-            "ST-20251113-act-010-01-event-spec",
-            "ST-20251113-act-001-02-ingest-impl"
+            "ST-20251113-act-004-01-strategy"
           ],
           "blocked": false,
           "blocked_by": [],
-          "unblock_plan": "以单校园订阅集试跑 worker，调通后扩展配置与指标。",
+          "unblock_plan": "基于策略选定 SDK，快速实现发送函数并补测试脚本。",
           "estimate_h": 3,
-          "risk": "high",
-          "confidence": 0.62,
+          "risk": "medium",
+          "confidence": 0.68,
           "interfaces_touched": [
-            "scheduler",
-            "data-pipeline"
+            "discord-bot",
+            "notification-service"
           ],
           "artifacts": [
-            "workers/open_sections_poller.ts",
-            "logs/poller/*.log"
+            "notifications/discord/bot.ts",
+            "notifications/discord/tests/bot.test.ts"
           ],
           "citations": [],
           "created_at": "2025-11-13T00:00:00Z",
           "updated_at": "2025-11-13T00:00:00Z",
           "owner": "tbd",
           "tags": [
-            "scheduler",
+            "discord",
             "notification"
           ]
         },
-        "ST-20251113-act-010-03-resume-tests": {
+        "ST-20251113-act-004-03-event-integration": {
           "seed_id": null,
-          "title": "长运行与重启恢复验证",
+          "title": "事件流接入与推荐策略",
           "type": "coding",
-          "summary": "验证轮询 worker 在长时间运行与重启后的行为，确保事件不重复/不丢失。",
+          "summary": "将 Discord 发送模块接入开放事件流，验证实测效果并记录默认策略。",
           "acceptance_draft": [
-            "模拟 ≥2 小时运行并插入重启，确认事件流水无缺口，重复触发被去重。",
-            "实现状态检查点（最近轮询时间/哈希）并在 worker 重启后自动恢复。",
-            "撰写 reports/poller_durability.md，总结可观测指标与常见异常恢复流程。"
+            "实现将开放事件转换为 Discord 消息的 adapter，支持频道过滤/模版。",
+            "在测试服务器实测多条通知，确保速率限制在可控范围并去重。",
+            "在 docs/discord_runbook.md 记录默认频道配置与如何禁用/切换策略。"
           ],
           "lane": "next",
-          "priority_suggested": "P1",
+          "priority_suggested": "P2",
           "status": "todo",
           "dependencies": [
+            "ST-20251113-act-004-02-bot-sending",
             "ST-20251113-act-010-02-polling-worker"
           ],
           "blocked": false,
           "blocked_by": [],
-          "unblock_plan": "在 staging 运行 worker，频繁重启/断网测试并记录行为。",
+          "unblock_plan": "接入事件流后跑一轮通知，收集反馈并落文档。",
           "estimate_h": 2,
           "risk": "medium",
-          "confidence": 0.67,
+          "confidence": 0.65,
           "interfaces_touched": [
-            "scheduler",
-            "observability"
+            "discord-bot",
+            "notification-service"
           ],
           "artifacts": [
-            "reports/poller_durability.md",
-            "scripts/poller_checkpoint.json"
+            "docs/discord_runbook.md",
+            "reports/discord_channel_validation.md"
           ],
           "citations": [],
           "created_at": "2025-11-13T00:00:00Z",
           "updated_at": "2025-11-13T00:00:00Z",
           "owner": "tbd",
           "tags": [
-            "scheduler",
+            "discord",
             "notification"
           ]
         }
       }
     },
-    "T-20251113-act-011-mail-sender-module": {
-      "seed_id": "ACT-011",
-      "title": "邮件发送模块多平台支持",
-      "type": "coding",
-      "summary": "抽象邮件发送接口并提供至少 SendGrid API 与 SMTP 两种实现，允许通过配置切换，同时支持多语言模板、速率限制与失败重试，以方便不同部署者使用自有邮件服务。",
+    "T-20251113-act-006-deploy-docs-cicd": {
+      "seed_id": "ACT-006",
+      "title": "编写并验证本地一键部署文档与辅助脚本",
+      "type": "docs",
+      "summary": "围绕“本地数据库 + 轻量 API 服务 + 前端 UI + 后台通知进程”的架构，整理本地部署步骤与环境要求，编写 README 与辅助脚本，使普通用户在个人电脑或服务器上无需修改代码即可初始化数据库、运行 API/前端/通知服务并完成配置。",
       "acceptance_draft": [
-        "提供统一的 MailSender 接口与配置（API key、SMTP host、发件人等），可在不改代码的情况下切换 SendGrid 与 SMTP，实现都能发送测试邮件。",
-        "邮件内容模板支持中英文版本，可注入课程名、Index、订阅者信息等变量；模板缺少翻译或字段时能在构建/测试阶段捕获。",
-        "在模拟配额用尽或网络错误时，模块能降级重试或记录清晰错误日志，不会导致主进程崩溃。"
+        "README 提供针对至少两种主流桌面操作系统（例如 Windows 与 macOS 或 Linux）的本地部署步骤，包含：安装 Node.js/bun、SQLite 或嵌入式数据库依赖、项目初始化、环境变量与密钥配置、如何执行数据库初始化/增量更新脚本，以及如何同时启动前端、API 服务与本地通知进程。",
+        "仓库包含可直接使用的本地辅助脚本（例如 scripts/setup_local_env.sh 和 scripts/run_local.sh），在一台全新环境的个人电脑上，用户 clone 仓库后运行脚本即可完成依赖安装校验、数据库初始化、服务启动与通知模块验证。"
       ],
       "lane": "next",
       "priority_suggested": "P1",
       "status": "todo",
       "dependencies": [
-        "T-20251113-act-009-subscription-management"
+        "T-20251113-act-001-soc-json-scraper",
+        "T-20251113-act-002-frontend-filter-mvp",
+        "T-20251113-act-003-mail-notify-function",
+        "T-20251113-act-008-local-query-api",
+        "T-20251113-act-009-subscription-management",
+        "T-20251113-act-010-local-polling-notify"
       ],
       "blocked": false,
       "blocked_by": [],
-      "unblock_plan": "在完成订阅存储后，先实现 SendGrid 版本，再扩展 SMTP/本地邮件发送，并接入邮件模板与单元测试。",
-      "estimate_h": 5,
+      "unblock_plan": "以本地单机运行与容器部署为一等公民目标设计流程：在至少两种主流桌面环境验证脚本可初始化 SQLite、启动 API/前端/通知服务，再整理成 README。",
+      "estimate_h": 6,
       "risk": "mid",
       "confidence": 0.7,
       "interfaces_touched": [
-        "notification-service",
-        "email-provider",
-        "i18n"
+        "docs",
+        "local-dev",
+        "deployment"
       ],
       "artifacts": [
-        "services/notify/mail_sender.ts",
-        "config/email.example.json",
-        "templates/email/*"
+        "README.md",
+        ".env.example",
+        "scripts/setup_local_env.sh",
+        "scripts/run_local.sh"
       ],
       "citations": [
         "EVID-001",
-        "EVID-005",
-        "R-20251113-spam"
+        "EVID-006",
+        "EVID-007",
+        "R-20251113-oss-governance"
       ],
       "created_at": "2025-11-13T00:00:00Z",
       "updated_at": "2025-11-13T00:00:00Z",
       "owner": "tbd",
       "tags": [
-        "seed:ACT-011",
-        "backend",
-        "email",
-        "notification"
+        "seed:ACT-006",
+        "docs",
+        "deployment",
+        "local-deploy"
       ],
       "subtasks": {
-        "ST-20251113-act-011-01-mail-interface": {
+        "ST-20251113-act-006-01-deploy-playbook": {
           "seed_id": null,
-          "title": "邮件发送接口与配置基线",
+          "title": "从零部署步骤梳理",
           "type": "docs",
-          "summary": "定义统一的邮件发送接口、配置方式与 secrets 需求，为 worker 提供稳定抽象。",
+          "summary": "整理从空机器到运行浏览/UI/订阅/通知全链路的步骤，形成部署清单。",
           "acceptance_draft": [
-            "在 docs/mail_sender_contract.md 描述 MailSender 接口方法、payload 字段与返回值。",
-            "梳理配置项（provider、速率限制、重试、模板路径）并提供 sample config。",
-            "列出安全要求（API key 存储、超时设置），附测试计划。"
+            "输出 docs/deployment_playbook.md，列出依赖安装、环境变量、脚本顺序和预期输出。",
+            "包含验证步骤：抓取数据、跑查询、成功订阅并收到邮件/Discord 通知。",
+            "附常见问题与排障提示，覆盖数据抓取失败、通知模块失败等情况。"
           ],
           "lane": "next",
-          "priority_suggested": "P1",
+          "priority_suggested": "P0",
           "status": "todo",
           "dependencies": [
-            "ST-20251113-act-010-01-event-spec"
+            "ST-20251113-act-003-03-end-to-end-validation",
+            "ST-20251113-act-004-03-event-integration",
+            "ST-20251113-act-005-03-language-toggle"
           ],
           "blocked": false,
           "blocked_by": [],
-          "unblock_plan": "调研现有 provider/SDK，先输出接口草案，再确认配置字段。",
+          "unblock_plan": "在功能闭环后复盘通路，梳理完整步骤并记录在 playbook。",
           "estimate_h": 2,
           "risk": "medium",
-          "confidence": 0.71,
+          "confidence": 0.69,
           "interfaces_touched": [
-            "notification-service",
-            "docs"
+            "docs",
+            "deployment"
           ],
           "artifacts": [
-            "docs/mail_sender_contract.md",
-            "configs/mail_sender.example.json"
+            "docs/deployment_playbook.md"
           ],
           "citations": [],
           "created_at": "2025-11-13T00:00:00Z",
           "updated_at": "2025-11-13T00:00:00Z",
           "owner": "tbd",
           "tags": [
-            "email",
-            "notification"
+            "deployment",
+            "docs",
+            "local-deploy"
           ]
         },
-        "ST-20251113-act-011-02-provider-adapter": {
+        "ST-20251113-act-006-02-automation-scripts": {
           "seed_id": null,
-          "title": "首个邮件 Provider 适配层",
+          "title": "部署流程脚本化",
           "type": "coding",
-          "summary": "基于 MailSender 抽象实现至少一种 provider（SMTP 或 API）的适配层，并附带测试。",
+          "summary": "将部署步骤脚本化（安装、迁移、抓取、启动服务），支撑本地/一键部署体验。",
           "acceptance_draft": [
-            "实现 notifications/mail/providers/smtp.ts（或其他）并通过接口测试，处理连接池/超时。",
-            "提供模板渲染/变量替换支持，便于 worker 生成内容。",
-            "写集成测试使用 mock server 验证调用参数与错误处理。"
+            "提供 setup_local_env.sh or make/just 任务，自动安装依赖、执行迁移与抓取。",
+            "实现 run_stack.sh 等脚本一键启动 API、前端、worker，附日志输出。",
+            "脚本容错并返回非零状态供 CI 使用。"
           ],
           "lane": "next",
           "priority_suggested": "P1",
           "status": "todo",
           "dependencies": [
-            "ST-20251113-act-011-01-mail-interface"
+            "ST-20251113-act-006-01-deploy-playbook",
+            "ST-20251113-act-001-03-data-verification"
           ],
           "blocked": false,
           "blocked_by": [],
-          "unblock_plan": "选定 provider SDK，先写 mock + adapter，再完善日志与 metrics。",
+          "unblock_plan": "依据 playbook 编写 shell/Justfile，逐一脚本化抓取、迁移与启动动作。",
           "estimate_h": 3,
           "risk": "medium",
-          "confidence": 0.68,
+          "confidence": 0.7,
           "interfaces_touched": [
-            "notification-service",
-            "email-provider"
+            "deployment",
+            "build-script"
           ],
           "artifacts": [
-            "notifications/mail/providers/smtp.ts",
-            "notifications/mail/tests/provider.test.ts"
+            "scripts/setup_local_env.sh",
+            "scripts/run_stack.sh"
           ],
           "citations": [],
           "created_at": "2025-11-13T00:00:00Z",
           "updated_at": "2025-11-13T00:00:00Z",
           "owner": "tbd",
           "tags": [
-            "email",
-            "backend"
+            "deployment",
+            "local-deploy"
           ]
         },
-        "ST-20251113-act-011-03-retry-tuning": {
+        "ST-20251113-act-006-03-fresh-run": {
           "seed_id": null,
-          "title": "失败重试与速率限制策略",
-          "type": "coding",
-          "summary": "为邮件模块加入重试、速率限制与可观测性，形成推荐使用指南。",
+          "title": "新手视角试跑与 README 迭代",
+          "type": "docs",
+          "summary": "以新手视角完整跑一遍脚本，记录过程并迭代 README/Quick Start。",
           "acceptance_draft": [
-            "实现重试队列/退避策略（最多 N 次）并对幂等 key 做保护。",
-            "加入速率限制器，支持 provider 配额/速率配置，超出时排队。",
-            "在 docs/mail_sender_usage.md 记录推荐配置与故障排查方法。"
+            "使用全新环境执行部署脚本，记录每一步耗时与遇到的问题。",
+            "根据反馈更新 README/Quickstart，加入截图或终端输出示例。",
+            "整理 reports/fresh_install_log.md，列出剩余风险与 TODO。"
           ],
           "lane": "next",
           "priority_suggested": "P1",
           "status": "todo",
           "dependencies": [
-            "ST-20251113-act-011-02-provider-adapter"
+            "ST-20251113-act-006-02-automation-scripts"
           ],
           "blocked": false,
           "blocked_by": [],
-          "unblock_plan": "复用 provider adapter，增加重试环节并结合 metrics，最后写 runbook。",
+          "unblock_plan": "找非项目成员试跑或自建干净容器记录过程，实时更新文档。",
           "estimate_h": 2,
           "risk": "medium",
-          "confidence": 0.69,
+          "confidence": 0.73,
           "interfaces_touched": [
-            "notification-service",
-            "observability"
+            "docs",
+            "deployment"
           ],
           "artifacts": [
-            "notifications/mail/retry_policy.ts",
-            "docs/mail_sender_usage.md"
+            "README.md",
+            "docs/quickstart.md",
+            "reports/fresh_install_log.md"
           ],
           "citations": [],
           "created_at": "2025-11-13T00:00:00Z",
           "updated_at": "2025-11-13T00:00:00Z",
           "owner": "tbd",
           "tags": [
-            "email",
-            "notification"
+            "deployment",
+            "docs",
+            "local-deploy"
           ]
         }
       }
